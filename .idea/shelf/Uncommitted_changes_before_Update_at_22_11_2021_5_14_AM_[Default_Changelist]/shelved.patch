Index: app/src/main/java/my/com/fashionapp/data/Data.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionappstaff.data\r\n\r\nimport com.google.firebase.firestore.Blob\r\nimport com.google.firebase.firestore.DocumentId\r\nimport java.text.SimpleDateFormat\r\nimport java.time.LocalDate\r\nimport java.time.format.DateTimeFormatter\r\nimport java.util.*\r\nimport kotlin.collections.ArrayList\r\n\r\nvar emailAdress : String = \"\"\r\nvar username : String = \"\"\r\nvar img : Blob = Blob.fromBytes(ByteArray(0))\r\nvar checkOutArray : ArrayList<OrderList> = ArrayList<OrderList>()\r\nvar totalPrice : Double = 0.0\r\n\r\ndata class Reward(\r\n    @DocumentId\r\n    var rewardID      : String = \"\",\r\n    var rewardName    : String = \"\",\r\n    var rewardDescrip : String = \"\",\r\n    var rewardQuan    : Int = 0,\r\n    var rewardPoint   : Double = 0.0,\r\n    var date          : Date = Date(),\r\n    var expiryDate    : String = \"\",\r\n    var rewardPhoto   : Blob = Blob.fromBytes(ByteArray(0)),\r\n)\r\n\r\ndata class User (\r\n    @DocumentId\r\n    var userId      : String = \"\",\r\n    var email       : String = \"\",\r\n    var password    : String = \"\",\r\n    var userName    : String = \"\",\r\n    var phoneNumber : String = \"\",\r\n    var userPhoto   : Blob = Blob.fromBytes(ByteArray(0)),\r\n    var homeAddress : String = \"\",\r\n    var userType    : String = \"\",\r\n    var userPoint   : Double = 0.0,\r\n)\r\n\r\ndata class Product (\r\n    @DocumentId\r\n    var productId      : String = \"\",\r\n    var productName    : String = \"\",\r\n    var productDescrip : String = \"\",\r\n    var productQuan    : Int = 0,\r\n    var productPrice   : Double = 0.0,\r\n    var productCategory: String = \"\",\r\n    var date           : Date = Date(),\r\n    var productPhoto   : Blob = Blob.fromBytes(ByteArray(0)),\r\n)\r\n\r\ndata class Cart (\r\n    @DocumentId\r\n    var cartID : String = \"\",\r\n    var cartUsername : String = \"\",\r\n    var cartProductID : String = \"\",\r\n    var cartProductName : String = \"\",\r\n    var cartProductQuantity : Int = 0,\r\n    var cartProductPrice : Double = 0.0,\r\n    var cartProductSize : String = \"\",\r\n    var cartProductPhoto:  Blob = Blob.fromBytes(ByteArray(0)),\r\n    var cartStatus : String = \"\",\r\n    var cartTotalPrice : Double = 0.0,\r\n    var cartCheck : String = \"\",\r\n)\r\n\r\ndata class OrderList (\r\n    @DocumentId\r\n    var orderProductID : String = \"\",\r\n    var orderCartID    : String = \"\",\r\n    var orderProductQuantity : Int = 0,\r\n)\r\n\r\ndata class Payment (\r\n    @DocumentId\r\n    var paymentID : String = \"\",\r\n    var userName  : String = \"\",\r\n    var paymentMethod : String = \"\",\r\n    var totalPrice    : Double = 0.0,\r\n    var phoneNo : String = \"\",\r\n    var paymentDate   : Date = Date(),\r\n)\r\n\r\ndata class ClaimHistory (\r\n    @DocumentId\r\n    var claimHistoryID : String = \"\",\r\n    var claimRewardName : String = \"\",\r\n    var claimRewardQuantity : Int = 0,\r\n    var claimRewardPoint : Double = 0.0,\r\n    var claimRewardImage : Blob = Blob.fromBytes(ByteArray(0)),\r\n    var username : String = \"\",\r\n)\r\n\r\nval currentDate = LocalDate.now()\r\nval viewFormatter = DateTimeFormatter.ofPattern(\"dd MMM, YYYY\")\r\nval formatDate = viewFormatter.format(currentDate)\r\n\r\ndata class Order (\r\n    @DocumentId\r\n    var orderId : String = \"\",\r\n    var orderProduct : String = \"\",\r\n    var orderProductQuantity: String = \"\",\r\n    var orderProductTotalPrice: String = \"\",\r\n    var orderProductSize: String = \"\",\r\n    var orderDate : String = formatDate,\r\n    var orderShipping : String = \"\",\r\n    var orderUserName : String = \"\",\r\n    var orderUserPhone : String = \"\",\r\n    var orderPaymentId : String = \"\",\r\n    var orderStatus : String = \"\",\r\n)\r\n\r\ndata class Voucher (\r\n    @DocumentId\r\n    var voucherId : String = \"\",\r\n    var voucherImg : Blob = Blob.fromBytes(ByteArray(0)),\r\n    var voucherName : String = \"\",\r\n    var voucherDescription : String = \"\",\r\n    var voucherQuantity : Int = 0,\r\n    var voucherDate : String = formatDate,\r\n    var voucherExpiryDate : String = \"\",\r\n    var voucherValue : Double = 0.0,\r\n)\r\n\r\ndata class VoucherClaim (\r\n    @DocumentId\r\n    var voucherId : String = \"\",\r\n    var claimUser : String = \"\",\r\n    var voucherQuantity : Int = 0,\r\n    var voucherExpiryDate : String = formatDate,\r\n    var voucherValue : Int = 0,\r\n    var voucherStatus : String = \"\",\r\n)
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/data/Data.kt b/app/src/main/java/my/com/fashionapp/data/Data.kt
--- a/app/src/main/java/my/com/fashionapp/data/Data.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/data/Data.kt	(date 1637528607700)
@@ -2,7 +2,6 @@
 
 import com.google.firebase.firestore.Blob
 import com.google.firebase.firestore.DocumentId
-import java.text.SimpleDateFormat
 import java.time.LocalDate
 import java.time.format.DateTimeFormatter
 import java.util.*
@@ -10,9 +9,13 @@
 
 var emailAdress : String = ""
 var username : String = ""
+var phonenumber : String = ""
+var homeaddress : String = ""
 var img : Blob = Blob.fromBytes(ByteArray(0))
 var checkOutArray : ArrayList<OrderList> = ArrayList<OrderList>()
 var totalPrice : Double = 0.0
+var vourID : String = ""
+var subtotalPrice : Double = 0.0
 
 data class Reward(
     @DocumentId
@@ -117,6 +120,7 @@
     var voucherId : String = "",
     var voucherImg : Blob = Blob.fromBytes(ByteArray(0)),
     var voucherName : String = "",
+    var voucherTerm : String = "",
     var voucherDescription : String = "",
     var voucherQuantity : Int = 0,
     var voucherDate : String = formatDate,
@@ -124,12 +128,15 @@
     var voucherValue : Double = 0.0,
 )
 
-data class VoucherClaim (
+data class VoucherClaim(
     @DocumentId
-    var voucherId : String = "",
-    var claimUser : String = "",
-    var voucherQuantity : Int = 0,
-    var voucherExpiryDate : String = formatDate,
-    var voucherValue : Int = 0,
-    var voucherStatus : String = "",
+    var voucherClaimID: String = "",
+    var voucherId: String = "",
+    var claimUser: String = "",
+    var voucherClaimImg: Blob = Blob.fromBytes(ByteArray(0)),
+    var voucherClaimName: String = "",
+    var voucherClaimQuantity: Int = 0,
+    var voucherClaimExpiryDate: String = formatDate,
+    var voucherValue: Double = 0.0,
+    var voucherStatus: String = "",
 )
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/RazorActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionapp\r\n\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.widget.Toast\r\nimport androidx.activity.viewModels\r\nimport com.razorpay.Checkout\r\nimport com.razorpay.PaymentResultListener\r\nimport kotlinx.android.synthetic.main.activity_razor.*\r\nimport my.com.fashionapp.data.*\r\nimport my.com.fashionapp.databinding.ActivityRazorBinding\r\nimport my.com.fashionappstaff.data.*\r\nimport org.json.JSONObject\r\n\r\nclass RazorActivity : AppCompatActivity(), PaymentResultListener {\r\n\r\n    private lateinit var binding: ActivityRazorBinding\r\n    private val vmU: UserViewModel by viewModels()\r\n    private val vmC: CartViewModel by viewModels()\r\n    private val vmP: PaymentViewModel by viewModels()\r\n    private val vmO: OrderViewModel by viewModels()\r\n    private val vmPro : ProductViewModel by viewModels()\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityRazorBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n        vmU.getAll()\r\n        vmC.getAll()\r\n        vmP.getAll()\r\n        vmPro.getAll()\r\n        Checkout.preload(getApplicationContext())\r\n\r\n        payButton.setOnClickListener {\r\n            makePayment()\r\n        }\r\n\r\n    }\r\n    private fun makePayment() {\r\n        val co = Checkout()\r\n\r\n        co.setKeyID(\"rzp_test_BP9lANfbhjZGhY\")\r\n\r\n        try {\r\n            val options = JSONObject()\r\n            options.put(\"name\",\"Learning Worldz\")\r\n            options.put(\"description\",\"Learning Worldz Payment\")\r\n            //You can omit the image option to fetch the image from dashboard\r\n            options.put(\"image\",\"https://s3.amazonaws.com/rzp-mobile/images/rzp.png\")\r\n            options.put(\"theme.color\", \"#3399cc\");\r\n            options.put(\"currency\",\"INR\");\r\n            options.put(\"amount\", totalPrice * 100)//pass amount in currency subunits\r\n\r\n//            val retryObj =  JSONObject()\r\n//            retryObj.put(\"enabled\", true)\r\n//            retryObj.put(\"max_count\", 4)\r\n//            options.put(\"retry\", retryObj)\r\n\r\n            val prefill = JSONObject()\r\n            prefill.put(\"email\",\"abcxyz@gmail.com\")\r\n            prefill.put(\"contact\",\"8527834283\")\r\n\r\n            options.put(\"prefill\",prefill)\r\n            co.open(this,options)\r\n        }catch (e: Exception){\r\n            Toast.makeText(this,\"Error in payment: \"+ e.message, Toast.LENGTH_LONG).show()\r\n            e.printStackTrace()\r\n        }\r\n    }\r\n\r\n    override fun onPaymentSuccess(p0: String?) {\r\n        Toast.makeText(this,\"Payment Sucsess: \"+ p0, Toast.LENGTH_LONG).show()\r\n        uploadData()\r\n    }\r\n\r\n    override fun onPaymentError(p0: Int, p1: String?) {\r\n        Toast.makeText(this,\"Payment Failed: \"+ p1, Toast.LENGTH_LONG).show()\r\n    }\r\n\r\n    fun uploadData() {\r\n\r\n        val preferences = this.getSharedPreferences(\"email\", Context.MODE_PRIVATE)\r\n        val emailLogin = preferences?.getString(\"emailLogin\",\"\")\r\n\r\n\r\n        for(i in 0 until checkOutArray.size) {\r\n\r\n            val cartID = checkOutArray[i].orderCartID\r\n            val cartProductQuantity = checkOutArray[i].orderProductQuantity\r\n            val cartProduct = checkOutArray[i].orderProductID\r\n\r\n            val cart = vmC.get(cartID)\r\n            val product = vmPro.get(cartProduct)\r\n            val quantity = product?.productQuan.toString().toInt()\r\n            val totalquantity = quantity - cartProductQuantity\r\n\r\n\r\n            val p = product?.let {\r\n\r\n                Product(\r\n                    productId      = it.productId,\r\n                    productName    = it.productName,\r\n                    productDescrip = it.productDescrip,\r\n                    productQuan    = totalquantity,\r\n                    productPrice   = it.productPrice,\r\n                    productCategory= it.productCategory,\r\n                    productPhoto   = it.productPhoto,\r\n                )\r\n            }\r\n\r\n            if (p != null) {\r\n                vmPro.set(p)\r\n            }\r\n\r\n\r\n            val c = cart?.let {\r\n                Cart(\r\n\r\n                    cartID = cartID,\r\n                    cartUsername = it.cartUsername,\r\n                    cartProductID = it.cartProductID,\r\n                    cartProductName = it.cartProductName,\r\n                    cartProductQuantity = cartProductQuantity,\r\n                    cartProductPrice = it.cartProductPrice,\r\n                    cartProductSize = it.cartProductSize,\r\n                    cartProductPhoto = it.cartProductPhoto,\r\n                    cartTotalPrice = it.cartTotalPrice,\r\n                    cartStatus = \"Done The Payment\",\r\n                    cartCheck = \"\",\r\n\r\n                    )\r\n            }\r\n\r\n            if (c != null) {\r\n                vmC.set(c)\r\n            }\r\n\r\n        }\r\n\r\n        val user = emailLogin?.let { vmU.getEmail(it) }\r\n        val point = (totalPrice / 10).toString().toDouble()\r\n        val userpoint = user?.userPoint\r\n        val totalpoint = userpoint?.plus(point)\r\n\r\n        val u = user?.let {\r\n            User(\r\n\r\n                userId = it.userId,\r\n                email = it.email,\r\n                password = it.password,\r\n                userName = it.userName,\r\n                phoneNumber = it.phoneNumber,\r\n                userPhoto = it.userPhoto,\r\n                homeAddress = it.homeAddress,\r\n                userPoint = totalpoint!!.toDouble(),\r\n                userType = it.userType\r\n\r\n            )\r\n        }\r\n        if (u != null) {\r\n            vmU.set(u)\r\n        }\r\n\r\n        val payid = vmP.validID()\r\n\r\n        val p = Payment(\r\n\r\n            paymentID = payid,\r\n            userName = user!!.userName,\r\n            paymentMethod = \"Pay By Card\",\r\n            totalPrice = totalPrice,\r\n            phoneNo = user.phoneNumber\r\n\r\n        )\r\n        vmP.set(p)\r\n\r\n        var orderProduct = \"\"\r\n        var orderProductQuantity = \"\"\r\n\r\n        for (i in 0 until checkOutArray.size) {\r\n\r\n            val cartProductQuantity = checkOutArray[i].orderProductQuantity.toString()\r\n            val cartProduct = checkOutArray[i].orderProductID\r\n            orderProduct += cartProduct + \",\"\r\n            orderProductQuantity += cartProductQuantity + \",\"\r\n\r\n        }\r\n//        orderProduct\r\n//\r\n//        val divide = \",\"\r\n//\r\n//        val list = orderProduct.split(divide)\r\n//\r\n//        list.size\r\n\r\n        val orderid = vmO.validID()\r\n        val o = Order(\r\n            orderId = orderid,\r\n            orderProduct = orderProduct,\r\n            orderProductQuantity = orderProductQuantity,\r\n            orderProductTotalPrice = totalPrice.toString(),\r\n//            orderProductSize = cart.cartProductSize,\r\n            orderShipping = user.homeAddress,\r\n            orderUserName = user.userName,\r\n            orderUserPhone = user.phoneNumber,\r\n            orderPaymentId = payid,\r\n            orderStatus = \"Paid\",\r\n        )\r\n\r\n        vmO.set(o)\r\n\r\n        val intent = Intent(this, MainActivity::class.java)\r\n        startActivity(intent)\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/RazorActivity.kt b/app/src/main/java/my/com/fashionapp/RazorActivity.kt
--- a/app/src/main/java/my/com/fashionapp/RazorActivity.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/RazorActivity.kt	(date 1637529028390)
@@ -6,11 +6,19 @@
 import android.os.Bundle
 import android.widget.Toast
 import androidx.activity.viewModels
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.NavHostFragment.findNavController
+import androidx.navigation.fragment.findNavController
+import androidx.recyclerview.widget.DividerItemDecoration
 import com.razorpay.Checkout
 import com.razorpay.PaymentResultListener
+import com.sun.mail.iap.Argument
 import kotlinx.android.synthetic.main.activity_razor.*
+import my.com.fashionapp.UI.CartFragment
+import my.com.fashionapp.UI.VoucherApplyFragment
 import my.com.fashionapp.data.*
 import my.com.fashionapp.databinding.ActivityRazorBinding
+import my.com.fashionapp.util.PaymentProductAdapter
 import my.com.fashionappstaff.data.*
 import org.json.JSONObject
 
@@ -21,7 +29,11 @@
     private val vmC: CartViewModel by viewModels()
     private val vmP: PaymentViewModel by viewModels()
     private val vmO: OrderViewModel by viewModels()
+    private val vmVC : VoucherClaimViewModel by viewModels()
     private val vmPro : ProductViewModel by viewModels()
+//    private val category by lazy { requireArguments().getString("category", "N/A") }
+
+    private lateinit var adapter: PaymentProductAdapter
 
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
@@ -31,36 +43,148 @@
         vmC.getAll()
         vmP.getAll()
         vmPro.getAll()
-        Checkout.preload(getApplicationContext())
+        vmVC.getAll()
+
+//        Checkout.preload(getApplicationContext())
 
-        payButton.setOnClickListener {
+//        val preferences = this.getSharedPreferences("email", Context.MODE_PRIVATE)
+//        val emailLogin = preferences?.getString("emailLogin","")
+//
+//        adapter = PaymentProductAdapter() { holder, cart ->
+//
+//        }
+//
+//        binding.rv.adapter = adapter
+//
+//        binding.rv.addItemDecoration(DividerItemDecoration(this, DividerItemDecoration.VERTICAL))
+//
+//        vmC.getAll().observe(this){ list->
+//            val paymentArray = list.filter { p ->
+//                p.cartCheck == "Checked"
+//            }
+//            adapter.submitList(paymentArray)
+//        }
+//
+//        binding.imgVoucherOpen.setOnClickListener {
+//            val intent = Intent(this, VoucherApplyFragment::class.java)
+//            startActivity(intent)
+//        }
+//
+//        binding.imgCheckOutBack.setOnClickListener {
+//            val intent = Intent(this, CartFragment::class.java)
+//            startActivity(intent)
+//        }
+//
+//        updateTotal()
+
+
+//        payButton.setOnClickListener {
             makePayment()
-        }
+//        }
+
+    }
 
-    }
+//    private fun updateTotal() {
+//
+//        binding.txtUsername.text = username
+//        binding.txtPhoneNumber.text = phonenumber
+//        binding.txtDeliveryAddress.text = homeaddress
+//
+//        val vid = intent.getStringExtra("vID")
+//        val vName = intent.getStringExtra("vName")
+//        val vValue = intent.getDoubleExtra("vValue", 0.0)
+//
+//
+//        if(vid == ""){
+//
+//            val shipping = 5.00
+//
+//            binding.txtMerSubtotal.text = "RM "+ "%.2f".format(totalPrice)
+//            binding.txtShipping.text =  "RM " + "%.2f".format(shipping)
+//
+//            val totalP = totalPrice + shipping
+//            val disc = 0.0
+//
+//            binding.txtDiscount2.text = "RM " + "%.2f".format(disc)
+//
+//            binding.txtTotalPayment.text = "RM " + "%.2f".format(totalP)
+//
+//            binding.txtTotalPrice.text = "RM " + "%.2f".format(totalP)
+//
+//            subtotalPrice = totalP
+//        } else {
+//
+//            if (vValue != 5.0){
+//
+//                val shipping = 5.00
+//
+//                binding.txtMerSubtotal.text = "RM "+ "%.2f".format(totalPrice)
+//                binding.txtShipping.text =  "RM " + "%.2f".format(shipping)
+//
+//                val totalP = totalPrice + shipping
+//                val disc = totalP * vValue
+//
+//                val totalAll = totalP - disc
+//
+//                binding.txtDiscount2.text = "-RM " + "%.2f".format(disc)
+//
+//                binding.txtTotalPayment.text = "RM " + "%.2f".format(totalAll)
+//
+//                binding.txtTotalPrice.text = "RM " + "%.2f".format(totalAll)
+//
+//                binding.txtVouchername.text = vName
+//
+//                subtotalPrice = totalAll
+//
+//            } else {
+//
+//                val shipping = 5.0
+//
+//                binding.txtMerSubtotal.text = "RM "+ "%.2f".format(totalPrice)
+//                binding.txtShipping.text =  "RM " + "%.2f".format(shipping)
+//
+//                val totalP = totalPrice + shipping
+//
+//                val disc = 5.0
+//
+//                val totalAll = totalP - disc
+//
+//                binding.txtDiscount2.text = "-RM " + "%.2f".format(disc)
+//
+//                binding.txtTotalPayment.text = "RM " + "%.2f".format(totalAll)
+//
+//                binding.txtTotalPrice.text = "RM " + "%.2f".format(totalAll)
+//
+//                binding.txtVouchername.text = vName
+//
+//                subtotalPrice = totalAll
+//            }
+//
+//        }
+//
+//    }
+
     private fun makePayment() {
         val co = Checkout()
+        val preferences = this.getSharedPreferences("email", Context.MODE_PRIVATE)
+        val emailLogin = preferences?.getString("emailLogin","")
 
         co.setKeyID("rzp_test_BP9lANfbhjZGhY")
 
         try {
             val options = JSONObject()
-            options.put("name","Learning Worldz")
-            options.put("description","Learning Worldz Payment")
+            options.put("name",username)
+            options.put("description","CHAN CO. Payment")
             //You can omit the image option to fetch the image from dashboard
             options.put("image","https://s3.amazonaws.com/rzp-mobile/images/rzp.png")
             options.put("theme.color", "#3399cc");
             options.put("currency","INR");
-            options.put("amount", totalPrice * 100)//pass amount in currency subunits
+            options.put("amount", subtotalPrice * 100)//pass amount in currency subunits
 
-//            val retryObj =  JSONObject()
-//            retryObj.put("enabled", true)
-//            retryObj.put("max_count", 4)
-//            options.put("retry", retryObj)
 
             val prefill = JSONObject()
-            prefill.put("email","abcxyz@gmail.com")
-            prefill.put("contact","8527834283")
+            prefill.put("email",emailLogin)
+            prefill.put("contact", phonenumber)
 
             options.put("prefill",prefill)
             co.open(this,options)
@@ -77,6 +201,9 @@
 
     override fun onPaymentError(p0: Int, p1: String?) {
         Toast.makeText(this,"Payment Failed: "+ p1, Toast.LENGTH_LONG).show()
+
+        val intent = Intent(this, MainActivity::class.java)
+        startActivity(intent)
     }
 
     fun uploadData() {
@@ -211,6 +338,26 @@
 
         vmO.set(o)
 
+        val vc = vmVC.get(vourID)
+
+        val v = vc?.let {
+            VoucherClaim(
+                voucherClaimID = vourID,
+                voucherId = it.voucherId,
+                claimUser = it.claimUser,
+                voucherClaimImg = it.voucherClaimImg,
+                voucherClaimName = it.voucherClaimName,
+                voucherClaimQuantity = it.voucherClaimQuantity - 1,
+                voucherClaimExpiryDate = it.voucherClaimExpiryDate,
+                voucherValue = it.voucherValue,
+                voucherStatus = "Used",
+            )
+        }
+
+        if (v != null) {
+            vmVC.set(v)
+        }
+
         val intent = Intent(this, MainActivity::class.java)
         startActivity(intent)
 
Index: app/src/main/res/layout/activity_razor.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".RazorActivity\">\r\n\r\n    <Button android:id=\"@+id/payButton\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Pay\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_razor.xml b/app/src/main/res/layout/activity_razor.xml
--- a/app/src/main/res/layout/activity_razor.xml	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/res/layout/activity_razor.xml	(date 1637529028363)
@@ -6,13 +6,6 @@
     android:layout_height="match_parent"
     tools:context=".RazorActivity">
 
-    <Button android:id="@+id/payButton"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:text="Pay"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintTop_toTopOf="parent"
-        app:layout_constraintBottom_toBottomOf="parent" />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
 
-</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/navigation/nav.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/nav\"\r\n    app:startDestination=\"@id/homeFragment\">\r\n\r\n    <fragment\r\n        android:id=\"@+id/homeFragment\"\r\n        android:name=\"my.com.fashionapp.UI.HomeFragment\"\r\n        android:label=\"fragment_home\"\r\n        tools:layout=\"@layout/fragment_home\" />\r\n    <fragment\r\n        android:id=\"@+id/signInFragment\"\r\n        android:name=\"my.com.fashionapp.UI.SignInFragment\"\r\n        android:label=\"Sign In Page\"\r\n        tools:layout=\"@layout/fragment_sign_in\" />\r\n    <fragment\r\n        android:id=\"@+id/signUpFragment\"\r\n        android:name=\"my.com.fashionapp.UI.SignUpFragment\"\r\n        android:label=\"Sign Up Page\"\r\n        tools:layout=\"@layout/fragment_sign_up\" />\r\n    <action\r\n        android:id=\"@+id/action_global_homeFragment\"\r\n        app:destination=\"@id/homeFragment\"\r\n        app:popUpTo=\"@id/homeFragment\"\r\n        app:popUpToInclusive=\"true\" />\r\n    <fragment\r\n        android:id=\"@+id/profileFragment\"\r\n        android:name=\"my.com.fashionapp.UI.ProfileFragment\"\r\n        android:label=\"fragment_profile\"\r\n        tools:layout=\"@layout/fragment_profile\" />\r\n    <fragment\r\n        android:id=\"@+id/setUpProfileFragment\"\r\n        android:name=\"my.com.fashionapp.UI.SetUpProfileFragment\"\r\n        android:label=\"fragment_set_up_profile\"\r\n        tools:layout=\"@layout/fragment_set_up_profile\" />\r\n    <fragment\r\n        android:id=\"@+id/loginProfileFragment\"\r\n        android:name=\"my.com.fashionapp.UI.LoginProfileFragment\"\r\n        android:label=\"fragment_login_profile\"\r\n        tools:layout=\"@layout/fragment_login_profile\" />\r\n    <action\r\n        android:id=\"@+id/action_global_profileFragment2\"\r\n        app:destination=\"@id/profileFragment\"\r\n        app:popUpTo=\"@id/profileFragment\"\r\n        app:popUpToInclusive=\"true\" />\r\n    <fragment\r\n        android:id=\"@+id/forgetPasswordFragment\"\r\n        android:name=\"my.com.fashionapp.UI.ForgetPasswordFragment\"\r\n        android:label=\"fragment_forget_password\"\r\n        tools:layout=\"@layout/fragment_forget_password\" >\r\n        <action\r\n            android:id=\"@+id/action_forgetPasswordFragment_to_signInFragment\"\r\n            app:destination=\"@id/signInFragment\"\r\n            app:popUpTo=\"@id/signInFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/resetPasswordFragment\"\r\n        android:name=\"my.com.fashionapp.UI.ResetPasswordFragment\"\r\n        android:label=\"fragment_reset_password\"\r\n        tools:layout=\"@layout/fragment_reset_password\" >\r\n        <action\r\n            android:id=\"@+id/action_resetPasswordFragment_to_loginProfileFragment\"\r\n            app:destination=\"@id/loginProfileFragment\"\r\n            app:popUpTo=\"@id/loginProfileFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/productDetailFragment\"\r\n        android:name=\"my.com.fashionapp.UI.ProductDetailFragment\"\r\n        android:label=\"fragment_product_detail\"\r\n        tools:layout=\"@layout/fragment_product_detail\" >\r\n        <action\r\n            android:id=\"@+id/action_productDetailFragment_to_homeFragment\"\r\n            app:destination=\"@id/homeFragment\"\r\n            app:popUpTo=\"@id/homeFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n        <action\r\n            android:id=\"@+id/action_productDetailFragment_to_categoryDetailFragment\"\r\n            app:destination=\"@id/categoryDetailFragment\"\r\n            app:popUpTo=\"@id/categoryDetailFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/cartFragment\"\r\n        android:name=\"my.com.fashionapp.UI.CartFragment\"\r\n        android:label=\"fragment_cart\"\r\n        tools:layout=\"@layout/fragment_cart\" >\r\n        <action\r\n            android:id=\"@+id/action_cartFragment_to_loginProfileFragment\"\r\n            app:destination=\"@id/loginProfileFragment\"\r\n            app:popUpTo=\"@id/loginProfileFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/payByCardFragment\"\r\n        android:name=\"my.com.fashionapp.UI.PayByCardFragment\"\r\n        android:label=\"fragment_pay_by_card\"\r\n        tools:layout=\"@layout/fragment_pay_by_card\" >\r\n        <action\r\n            android:id=\"@+id/action_payByCardFragment_to_paymentMethodFragment\"\r\n            app:destination=\"@id/paymentMethodFragment\"\r\n            app:popUpTo=\"@id/paymentMethodFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/paymentMethodFragment\"\r\n        android:name=\"my.com.fashionapp.UI.PaymentMethodFragment\"\r\n        android:label=\"fragment_payment_method\"\r\n        tools:layout=\"@layout/fragment_payment_method\" >\r\n        <action\r\n            android:id=\"@+id/action_paymentMethodFragment_to_cartFragment\"\r\n            app:destination=\"@id/cartFragment\"\r\n            app:popUpTo=\"@id/cartFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/rewardFragment\"\r\n        android:name=\"my.com.fashionapp.UI.RewardFragment\"\r\n        android:label=\"fragment_reward\"\r\n        tools:layout=\"@layout/fragment_reward\" >\r\n        <action\r\n            android:id=\"@+id/action_rewardFragment_to_loginProfileFragment\"\r\n            app:destination=\"@id/loginProfileFragment\"\r\n            app:popUpTo=\"@id/loginProfileFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/rewardDetailFragment\"\r\n        android:name=\"my.com.fashionapp.UI.RewardDetailFragment\"\r\n        android:label=\"fragment_reward_detail\"\r\n        tools:layout=\"@layout/fragment_reward_detail\" >\r\n        <action\r\n            android:id=\"@+id/action_rewardDetailFragment_to_rewardFragment\"\r\n            app:destination=\"@id/rewardFragment\"\r\n            app:popUpTo=\"@id/rewardFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/paymentHistoryFragment\"\r\n        android:name=\"my.com.fashionapp.UI.PaymentHistoryFragment\"\r\n        android:label=\"fragment_payment_history\"\r\n        tools:layout=\"@layout/fragment_payment_history\" >\r\n        <action\r\n            android:id=\"@+id/action_paymentHistoryFragment_to_loginProfileFragment\"\r\n            app:destination=\"@id/loginProfileFragment\"\r\n            app:popUpTo=\"@id/loginProfileFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/categoryFragment\"\r\n        android:name=\"my.com.fashionapp.UI.categoryFragment\"\r\n        android:label=\"fragment_category\"\r\n        tools:layout=\"@layout/fragment_category\" />\r\n    <fragment\r\n        android:id=\"@+id/categoryDetailFragment\"\r\n        android:name=\"my.com.fashionapp.UI.CategoryDetailFragment\"\r\n        android:label=\"fragment_category_detail\"\r\n        tools:layout=\"@layout/fragment_category_detail\" >\r\n        <action\r\n            android:id=\"@+id/action_categoryDetailFragment_to_categoryFragment2\"\r\n            app:destination=\"@id/categoryFragment\"\r\n            app:popUpTo=\"@id/categoryFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/updateUserProfileFragment\"\r\n        android:name=\"my.com.fashionapp.UI.UpdateUserProfileFragment\"\r\n        android:label=\"fragment_update_user_profile\"\r\n        tools:layout=\"@layout/fragment_update_user_profile\" >\r\n        <action\r\n            android:id=\"@+id/action_updateUserProfileFragment_to_loginProfileFragment\"\r\n            app:destination=\"@id/loginProfileFragment\"\r\n            app:popUpTo=\"@id/loginProfileFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/rewardClaimFragment\"\r\n        android:name=\"my.com.fashionapp.UI.RewardClaimFragment\"\r\n        android:label=\"fragment_reward_claim\"\r\n        tools:layout=\"@layout/fragment_reward_claim\" >\r\n        <action\r\n            android:id=\"@+id/action_rewardClaimFragment_to_rewardFragment\"\r\n            app:destination=\"@id/rewardFragment\"\r\n            app:popUpTo=\"@id/rewardFragment\"\r\n            app:popUpToInclusive=\"true\" />\r\n    </fragment>\r\n    <action\r\n        android:id=\"@+id/action_global_categoryFragment\"\r\n        app:destination=\"@id/categoryFragment\"\r\n        app:popUpTo=\"@id/categoryFragment\"\r\n        app:popUpToInclusive=\"true\" />\r\n    <action\r\n        android:id=\"@+id/action_global_loginProfileFragment\"\r\n        app:destination=\"@id/loginProfileFragment\"\r\n        app:popUpTo=\"@id/loginProfileFragment\"\r\n        app:popUpToInclusive=\"true\" />\r\n    <activity\r\n        android:id=\"@+id/razorActivity\"\r\n        android:name=\"my.com.fashionapp.RazorActivity\"\r\n        android:label=\"activity_razor\"\r\n        tools:layout=\"@layout/activity_razor\" />\r\n    <dialog\r\n        android:id=\"@+id/emptyCartFragment\"\r\n        android:name=\"my.com.fashionapp.UI.EmptyCartFragment\"\r\n        android:label=\"fragment_empty_cart\"\r\n        tools:layout=\"@layout/fragment_empty_cart\" >\r\n        <action\r\n            android:id=\"@+id/action_emptyCartFragment_to_signInFragment\"\r\n            app:destination=\"@id/signInFragment\" />\r\n    </dialog>\r\n    <dialog\r\n        android:id=\"@+id/emptyCartLogin\"\r\n        android:name=\"my.com.fashionapp.UI.EmptyCartLogin\"\r\n        android:label=\"fragment_empty_cart_login\"\r\n        tools:layout=\"@layout/fragment_empty_cart_login\" />\r\n    <fragment\r\n        android:id=\"@+id/deliveryFragment\"\r\n        android:name=\"my.com.fashionapp.UI.DeliveryFragment\"\r\n        android:label=\"fragment_delivery\"\r\n        tools:layout=\"@layout/fragment_delivery\" >\r\n        <action\r\n            android:id=\"@+id/action_deliveryFragment_to_loginProfileFragment\"\r\n            app:destination=\"@id/loginProfileFragment\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/deliveryCompletedFragment\"\r\n        android:name=\"my.com.fashionapp.UI.DeliveryCompletedFragment\"\r\n        android:label=\"DeliveryCompletedFragment\" />\r\n    <fragment\r\n        android:id=\"@+id/deliveryDeliveredFragment\"\r\n        android:name=\"my.com.fashionapp.UI.DeliveryDeliveredFragment\"\r\n        android:label=\"DeliveryDeliveredFragment\" />\r\n    <fragment\r\n        android:id=\"@+id/deliveryDeliveringFragment\"\r\n        android:name=\"my.com.fashionapp.UI.DeliveryDeliveringFragment\"\r\n        android:label=\"DeliveryDeliveringFragment\" />\r\n    <fragment\r\n        android:id=\"@+id/deliveryToShipFragment\"\r\n        android:name=\"my.com.fashionapp.UI.DeliveryToShipFragment\"\r\n        android:label=\"DeliveryToShipFragment\" />\r\n    <fragment\r\n        android:id=\"@+id/orderDetailFragment\"\r\n        android:name=\"my.com.fashionapp.UI.OrderDetailFragment\"\r\n        android:label=\"fragment_order_detail\"\r\n        tools:layout=\"@layout/fragment_order_detail\" >\r\n        <action\r\n            android:id=\"@+id/action_orderDetailFragment_to_deliveryFragment\"\r\n            app:destination=\"@id/deliveryFragment\" />\r\n    </fragment>\r\n    <fragment\r\n        android:id=\"@+id/deliveryProductDetailFragment\"\r\n        android:name=\"my.com.fashionapp.UI.DeliveryProductDetailFragment\"\r\n        android:label=\"DeliveryProductDetailFragment\" />\r\n    <fragment\r\n        android:id=\"@+id/voucherFragment\"\r\n        android:name=\"my.com.fashionapp.UI.VoucherFragment\"\r\n        android:label=\"fragment_voucher\"\r\n        tools:layout=\"@layout/fragment_voucher\" />\r\n</navigation>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/navigation/nav.xml b/app/src/main/res/navigation/nav.xml
--- a/app/src/main/res/navigation/nav.xml	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/res/navigation/nav.xml	(date 1637517329005)
@@ -258,5 +258,67 @@
         android:id="@+id/voucherFragment"
         android:name="my.com.fashionapp.UI.VoucherFragment"
         android:label="fragment_voucher"
-        tools:layout="@layout/fragment_voucher" />
+        tools:layout="@layout/fragment_voucher" >
+        <action
+            android:id="@+id/action_voucherFragment_to_loginProfileFragment"
+            app:destination="@id/loginProfileFragment"
+            app:popUpTo="@id/voucherFragment"
+            app:popUpToInclusive="true" />
+    </fragment>
+    <fragment
+        android:id="@+id/termNConditionFragment"
+        android:name="my.com.fashionapp.UI.TermNConditionFragment"
+        android:label="fragment_term_n_condition"
+        tools:layout="@layout/fragment_term_n_condition" >
+        <action
+            android:id="@+id/action_termNConditionFragment_to_voucherFragment2"
+            app:destination="@id/voucherFragment"
+            app:popUpTo="@id/termNConditionFragment"
+            app:popUpToInclusive="true" />
+    </fragment>
+    <fragment
+        android:id="@+id/listVoucherFragment"
+        android:name="my.com.fashionapp.UI.ListVoucherFragment"
+        android:label="fragment_list_voucher"
+        tools:layout="@layout/fragment_list_voucher" />
+    <fragment
+        android:id="@+id/voucherUsedFragment"
+        android:name="my.com.fashionapp.UI.VoucherUsedFragment"
+        android:label="fragment_voucher_used"
+        tools:layout="@layout/fragment_voucher_used" />
+    <fragment
+        android:id="@+id/voucherHistoryFragment"
+        android:name="my.com.fashionapp.UI.VoucherHistoryFragment"
+        android:label="fragment_voucher_history"
+        tools:layout="@layout/fragment_voucher_history" >
+        <action
+            android:id="@+id/action_voucherHistoryFragment_to_voucherFragment"
+            app:destination="@id/voucherFragment" />
+    </fragment>
+    <fragment
+        android:id="@+id/voucherInvalidFragment"
+        android:name="my.com.fashionapp.UI.VoucherInvalidFragment"
+        android:label="fragment_voucher_invalid"
+        tools:layout="@layout/fragment_voucher_invalid" />
+    <fragment
+        android:id="@+id/voucherApplyFragment"
+        android:name="my.com.fashionapp.UI.VoucherApplyFragment"
+        android:label="fragment_voucher_apply"
+        tools:layout="@layout/fragment_voucher_apply" />
+    <fragment
+        android:id="@+id/voucherBagFragment"
+        android:name="my.com.fashionapp.UI.VoucherBagFragment"
+        android:label="fragment_voucher_bag"
+        tools:layout="@layout/fragment_voucher_bag" />
+    <fragment
+        android:id="@+id/razorPayFragment"
+        android:name="my.com.fashionapp.UI.RazorPayFragment"
+        android:label="fragment_razor_pay"
+        tools:layout="@layout/fragment_razor_pay" >
+        <action
+            android:id="@+id/action_razorPayFragment_to_cartFragment"
+            app:destination="@id/cartFragment"
+            app:popUpTo="@id/razorPayFragment"
+            app:popUpToInclusive="true" />
+    </fragment>
 </navigation>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/CartFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionapp.UI\r\n\r\nimport android.app.AlertDialog\r\nimport android.content.Context\r\nimport android.content.DialogInterface\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport androidx.fragment.app.activityViewModels\r\nimport androidx.navigation.fragment.findNavController\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView\r\nimport my.com.fashionapp.R\r\nimport my.com.fashionapp.data.CartViewModel\r\nimport my.com.fashionapp.data.ProductViewModel\r\nimport my.com.fashionapp.data.UserViewModel\r\nimport my.com.fashionapp.databinding.FragmentCartBinding\r\nimport my.com.fashionapp.util.CartAdapter\r\nimport my.com.fashionapp.util.informationDialog\r\nimport my.com.fashionappstaff.data.*\r\n\r\nclass CartFragment : Fragment() {\r\n\r\n    private lateinit var binding: FragmentCartBinding\r\n    private val nav by lazy{ findNavController() }\r\n    private val vm: CartViewModel by activityViewModels()\r\n    private val vmU: UserViewModel by activityViewModels()\r\n    private val vmP : ProductViewModel by activityViewModels()\r\n\r\n    private lateinit var adapter: CartAdapter\r\n\r\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\r\n        // Inflate the layout for this fragment\r\n        binding = FragmentCartBinding.inflate(inflater, container, false)\r\n        vm.getAll()\r\n        vmP.getAll()\r\n        // TODO\r\n        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)\r\n        btn.visibility = View.GONE\r\n\r\n        binding.imgCartBack.setOnClickListener { nav.navigate(R.id.action_cartFragment_to_loginProfileFragment) }\r\n\r\n        var arrayPress = arrayListOf<OrderList>()\r\n\r\n        adapter = CartAdapter() { holder, cart ->\r\n\r\n            // Item Add\r\n            holder.imgAdd.setOnClickListener {\r\n\r\n                var add = holder.txtQuantity.text.toString().toInt() + 1\r\n                val p = vmP.get(cart.cartProductID)\r\n\r\n                if (p?.productQuan!! >= add){\r\n                    val totalPrice = cart.cartProductPrice * add.toString().toDouble()\r\n                    holder.txtQuantity.text = add.toString()\r\n\r\n                    val c = Cart (\r\n                        cartID = cart.cartID,\r\n                        cartUsername = cart.cartUsername,\r\n                        cartProductID = cart.cartProductID,\r\n                        cartProductName = cart.cartProductName,\r\n                        cartProductQuantity = add,\r\n                        cartProductPrice = cart.cartProductPrice,\r\n                        cartProductSize = cart.cartProductSize,\r\n                        cartProductPhoto = cart.cartProductPhoto,\r\n                        cartStatus = cart.cartStatus,\r\n                        cartTotalPrice = String.format(\"%.2f\",totalPrice).toDoubleOrNull() ?: 0.0,\r\n                        cartCheck = cart.cartCheck,\r\n                    )\r\n                    vm.set(c)\r\n                } else {\r\n                    val err = \"The Product is reached the Maximum Quantity!! \\n\"\r\n                    informationDialog(err)\r\n                }\r\n\r\n            }\r\n\r\n            // Item Minus and Validation(need to do)\r\n            holder.imgMinus.setOnClickListener {\r\n                var minus = holder.txtQuantity.text.toString().toInt() - 1\r\n                if (minus != 0){\r\n                    val totalPrice = holder.txtPrice.text.toString().toDouble() - cart.cartProductPrice\r\n                    holder.txtPrice.text = \"%.2f\".format(totalPrice)\r\n                    holder.txtQuantity.text = minus.toString()\r\n                    val c = Cart (\r\n                        cartID = cart.cartID,\r\n                        cartUsername = cart.cartUsername,\r\n                        cartProductID = cart.cartProductID,\r\n                        cartProductName = cart.cartProductName,\r\n                        cartProductQuantity = minus,\r\n                        cartProductPrice = cart.cartProductPrice,\r\n                        cartProductSize = cart.cartProductSize,\r\n                        cartProductPhoto = cart.cartProductPhoto,\r\n                        cartStatus = cart.cartStatus,\r\n                        cartTotalPrice = String.format(\"%.2f\",totalPrice).toDoubleOrNull() ?: 0.0,\r\n                        cartCheck = cart.cartCheck,\r\n                    )\r\n                    vm.set(c)\r\n                } else {\r\n                    val err = \" Do you want to delete the product ? \\n\"\r\n                    deleteDialog(err, cart.cartID)\r\n                }\r\n            }\r\n\r\n            holder.chkBox.setOnClickListener {\r\n\r\n                if(holder.chkBox.isChecked){\r\n\r\n                    val c = Cart (\r\n                        cartID = cart.cartID,\r\n                        cartUsername = cart.cartUsername,\r\n                        cartProductID = cart.cartProductID,\r\n                        cartProductName = cart.cartProductName,\r\n                        cartProductQuantity = cart.cartProductQuantity,\r\n                        cartProductPrice = cart.cartProductPrice,\r\n                        cartProductSize = cart.cartProductSize,\r\n                        cartProductPhoto = cart.cartProductPhoto,\r\n                        cartStatus = cart.cartStatus,\r\n                        cartTotalPrice = cart.cartTotalPrice,\r\n                        cartCheck = \"Checked\",\r\n                    )\r\n                    vm.set(c)\r\n\r\n                } else {\r\n                    arrayPress.removeIf { c -> c.orderProductID == cart.cartProductID }\r\n                    val c = Cart (\r\n                        cartID = cart.cartID,\r\n                        cartUsername = cart.cartUsername,\r\n                        cartProductID = cart.cartProductID,\r\n                        cartProductName = cart.cartProductName,\r\n                        cartProductQuantity = cart.cartProductQuantity,\r\n                        cartProductPrice = cart.cartProductPrice,\r\n                        cartProductSize = cart.cartProductSize,\r\n                        cartProductPhoto = cart.cartProductPhoto,\r\n                        cartStatus = cart.cartStatus,\r\n                        cartTotalPrice = cart.cartTotalPrice,\r\n                        cartCheck = \"Unchecked\",\r\n                    )\r\n                    vm.set(c)\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        binding.rv.adapter = adapter\r\n\r\n        val preferences = activity?.getSharedPreferences(\"email\", Context.MODE_PRIVATE)\r\n        val emailLogin = preferences?.getString(\"emailLogin\",\"\")\r\n\r\n        val u = emailLogin?.let { vmU.getEmail(it) }\r\n\r\n        vm.getAll().observe(viewLifecycleOwner) { list ->\r\n\r\n            val cartArray = list.filter { c ->\r\n                c.cartUsername == u?.userName && c.cartStatus != \"Done The Payment\"\r\n            }\r\n\r\n            val caltotal = cartArray.filter { c ->\r\n                c.cartCheck == \"Checked\"\r\n            }\r\n            if(caltotal.isNotEmpty()){\r\n\r\n\r\n                var totalPrice = 0.0\r\n                val shipping = 5.0\r\n                var subTotal = 0.0\r\n                arrayPress.clear()\r\n\r\n                for(i in 0..caltotal.size - 1){\r\n\r\n                    val totalProductPrice = caltotal[i].cartTotalPrice\r\n                    totalPrice += totalProductPrice\r\n                    subTotal = totalPrice + 5.0\r\n\r\n                    var ol = OrderList(\r\n                        orderProductID = caltotal[i].cartProductID,\r\n                        orderCartID = caltotal[i].cartID,\r\n                        orderProductQuantity = caltotal[i].cartProductQuantity,\r\n                    )\r\n                    arrayPress.add(ol)\r\n                    arrayPress.size\r\n                }\r\n\r\n                binding.txtCartSubtotalPrice.text = \"%.2f\".format(totalPrice)\r\n                binding.txtCartShipping.text = \"%.2f\".format(shipping)\r\n                binding.txtCartTotalPrice.text = \"%.2f\".format(subTotal)\r\n\r\n            } else {\r\n\r\n                val totalPrice = 0.0\r\n                val shipping = 0.0\r\n                val subTotal = 0.0\r\n\r\n                binding.txtCartSubtotalPrice.text = \"%.2f\".format(totalPrice)\r\n                binding.txtCartShipping.text = \"%.2f\".format(shipping)\r\n                binding.txtCartTotalPrice.text = \"%.2f\".format(subTotal)\r\n            }\r\n\r\n            adapter.submitList(cartArray)\r\n        }\r\n\r\n        binding.btnCheckOut.setOnClickListener { checkout(arrayPress) }\r\n\r\n        vm.getAll().observe(viewLifecycleOwner) { list ->\r\n            adapter.submitList(list)\r\n\r\n            if(list.isEmpty()){\r\n                nav.navigate(R.id.emptyCartLogin)\r\n            }\r\n        }\r\n\r\n        return binding.root\r\n    }\r\n\r\n    private fun checkout(product: ArrayList<OrderList>) {\r\n\r\n        checkOutArray = product\r\n\r\n        totalPrice = binding.txtCartTotalPrice.text.toString().toDouble()\r\n\r\n        nav.navigate(R.id.razorActivity)\r\n    }\r\n\r\n    fun Fragment.deleteDialog(text: String, cartID: String) {\r\n        AlertDialog.Builder(context)\r\n            .setTitle(\"Delete\")\r\n            .setMessage(text)\r\n            .setPositiveButton(\"Ok\", DialogInterface.OnClickListener { dialog, which ->\r\n                vm.delete(cartID)\r\n                dialog.cancel()\r\n            })\r\n            .setNegativeButton(\"Cancel\", DialogInterface.OnClickListener { dialog, which ->\r\n                dialog.cancel()\r\n            })\r\n            .show()\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/CartFragment.kt b/app/src/main/java/my/com/fashionapp/UI/CartFragment.kt
--- a/app/src/main/java/my/com/fashionapp/UI/CartFragment.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/UI/CartFragment.kt	(date 1637528607709)
@@ -3,15 +3,19 @@
 import android.app.AlertDialog
 import android.content.Context
 import android.content.DialogInterface
+import android.content.Intent
 import android.os.Bundle
 import androidx.fragment.app.Fragment
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
+import android.widget.Toast
+import androidx.core.os.bundleOf
 import androidx.fragment.app.activityViewModels
 import androidx.navigation.fragment.findNavController
 import com.google.android.material.bottomnavigation.BottomNavigationView
 import my.com.fashionapp.R
+import my.com.fashionapp.RazorActivity
 import my.com.fashionapp.data.CartViewModel
 import my.com.fashionapp.data.ProductViewModel
 import my.com.fashionapp.data.UserViewModel
@@ -34,6 +38,7 @@
         // Inflate the layout for this fragment
         binding = FragmentCartBinding.inflate(inflater, container, false)
         vm.getAll()
+        vmU.getAll()
         vmP.getAll()
         // TODO
         val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
@@ -157,6 +162,10 @@
                 c.cartUsername == u?.userName && c.cartStatus != "Done The Payment"
             }
 
+            if(cartArray.isEmpty()){
+                nav.navigate(R.id.emptyCartLogin)
+            }
+
             val caltotal = cartArray.filter { c ->
                 c.cartCheck == "Checked"
             }
@@ -201,14 +210,13 @@
             adapter.submitList(cartArray)
         }
 
-        binding.btnCheckOut.setOnClickListener { checkout(arrayPress) }
-
-        vm.getAll().observe(viewLifecycleOwner) { list ->
-            adapter.submitList(list)
+        binding.btnCheckOut.setOnClickListener {
+            if(arrayPress.size != 0 ){
+                checkout(arrayPress)
+            } else {
+                Toast.makeText(context,"Please Select the product you want to process to payment", Toast.LENGTH_LONG).show()
+            }
 
-            if(list.isEmpty()){
-                nav.navigate(R.id.emptyCartLogin)
-            }
         }
 
         return binding.root
@@ -216,11 +224,23 @@
 
     private fun checkout(product: ArrayList<OrderList>) {
 
+        val preferences = activity?.getSharedPreferences("email", Context.MODE_PRIVATE)
+        val emailLogin = preferences?.getString("emailLogin","")
+
+        val u = emailLogin?.let { vmU.getEmail(it) }
+
+        if (u != null) {
+            username = u.userName
+            homeaddress = u.homeAddress
+            phonenumber = u.phoneNumber
+        }
+
         checkOutArray = product
 
         totalPrice = binding.txtCartTotalPrice.text.toString().toDouble()
 
-        nav.navigate(R.id.razorActivity)
+        nav.navigate(R.id.razorPayFragment, bundleOf("vID" to ""))
+//        nav.navigate(R.id.razorActivity)
     }
 
     fun Fragment.deleteDialog(text: String, cartID: String) {
Index: app/src/main/java/my/com/fashionapp/util/VoucherAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionapp.util\r\n\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.Button\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.recyclerview.widget.DiffUtil\r\nimport androidx.recyclerview.widget.ListAdapter\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport my.com.fashionapp.R\r\nimport my.com.fashionappstaff.data.Voucher\r\n\r\nclass VoucherAdapter (val fn: (VoucherAdapter.ViewHolder, Voucher) -> Unit = { _, _ -> })\r\n    :  ListAdapter<Voucher, VoucherAdapter.ViewHolder>(DiffCallback) {\r\n\r\n    companion object DiffCallback : DiffUtil.ItemCallback<Voucher>() {\r\n        override fun areItemsTheSame(a: Voucher, b: Voucher)    = a.voucherId == b.voucherId\r\n        override fun areContentsTheSame(a: Voucher, b: Voucher) = a.voucherId == b.voucherId\r\n    }\r\n\r\n    class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {\r\n        val root = view\r\n        val imgPhoto     : ImageView = view.findViewById(R.id.imgVoucher)\r\n        val txtName      : TextView = view.findViewById(R.id.txtVoucherName)\r\n        val txtExpiry    : TextView = view.findViewById(R.id.txtExpiryDate)\r\n        val btnClaim     : Button = view.findViewById(R.id.btnClaim)\r\n        val txtTerm      : TextView = view.findViewById(R.id.txtTerm)\r\n    }\r\n\r\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\r\n        val view = LayoutInflater\r\n            .from(parent.context)\r\n            .inflate(R.layout.item_voucher, parent, false)\r\n        return ViewHolder(view)\r\n    }\r\n\r\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\r\n        val voucher = getItem(position)\r\n\r\n        holder.imgPhoto.setImageBitmap(voucher.voucherImg.toBitmap())\r\n        holder.txtName.text = voucher.voucherName\r\n        holder.txtExpiry.text = \"Valid \" + voucher.voucherExpiryDate\r\n\r\n        // TODO: Photo (blob to bitmap)a\r\n        fn(holder, voucher)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/util/VoucherAdapter.kt b/app/src/main/java/my/com/fashionapp/util/VoucherAdapter.kt
--- a/app/src/main/java/my/com/fashionapp/util/VoucherAdapter.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/util/VoucherAdapter.kt	(date 1637474921911)
@@ -6,6 +6,7 @@
 import android.widget.Button
 import android.widget.ImageView
 import android.widget.TextView
+import androidx.cardview.widget.CardView
 import androidx.recyclerview.widget.DiffUtil
 import androidx.recyclerview.widget.ListAdapter
 import androidx.recyclerview.widget.RecyclerView
@@ -22,6 +23,8 @@
 
     class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {
         val root = view
+        val cv           : CardView = view.findViewById(R.id.cv)
+        val imgExpiry    : ImageView = view.findViewById(R.id.imgExpiry)
         val imgPhoto     : ImageView = view.findViewById(R.id.imgVoucher)
         val txtName      : TextView = view.findViewById(R.id.txtVoucherName)
         val txtExpiry    : TextView = view.findViewById(R.id.txtExpiryDate)
Index: app/src/main/java/my/com/fashionapp/util/PaymentProductAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/util/PaymentProductAdapter.kt b/app/src/main/java/my/com/fashionapp/util/PaymentProductAdapter.kt
new file mode 100644
--- /dev/null	(date 1637507578180)
+++ b/app/src/main/java/my/com/fashionapp/util/PaymentProductAdapter.kt	(date 1637507578180)
@@ -0,0 +1,48 @@
+package my.com.fashionapp.util
+
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import android.widget.*
+import androidx.recyclerview.widget.DiffUtil
+import androidx.recyclerview.widget.ListAdapter
+import androidx.recyclerview.widget.RecyclerView
+import my.com.fashionapp.R
+import my.com.fashionappstaff.data.Cart
+
+class PaymentProductAdapter (val fn: (ViewHolder, Cart) -> Unit = { _, _ -> })
+    :  ListAdapter<Cart, PaymentProductAdapter.ViewHolder>(DiffCallback) {
+
+    companion object DiffCallback : DiffUtil.ItemCallback<Cart>() {
+        override fun areItemsTheSame(a: Cart, b: Cart)    = a.cartID == b.cartID
+        override fun areContentsTheSame(a: Cart, b: Cart) = a == b
+    }
+
+    class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {
+        val root = view
+        val imgPhoto        : ImageView = view.findViewById(R.id.imgProduct)
+        val txtProductName  : TextView = view.findViewById(R.id.txtProductName)
+        val txtSize         : TextView = view.findViewById(R.id.txtSize)
+        val txtProductPrice : TextView = view.findViewById(R.id.txtProductPrice)
+        var txtQuantity     : TextView = view.findViewById(R.id.txtQuantity)
+    }
+
+    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
+        val view = LayoutInflater
+            .from(parent.context)
+            .inflate(R.layout.item_payproduct, parent, false)
+        return ViewHolder(view)
+    }
+
+    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
+        val payment = getItem(position)
+
+        holder.imgPhoto.setImageBitmap(payment.cartProductPhoto.toBitmap())
+        holder.txtProductName.text = payment.cartProductName
+        holder.txtQuantity.text = "x" + payment.cartProductQuantity.toString()
+        holder.txtSize.text = payment.cartProductSize
+        holder.txtProductPrice.text  = "RM "+"%.2f".format(payment.cartTotalPrice)
+
+        fn(holder, payment)
+    }
+}
\ No newline at end of file
Index: app/src/main/res/layout/item_voucher.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\">\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imgVoucher\"\r\n        android:layout_width=\"100dp\"\r\n        android:layout_height=\"100dp\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        tools:srcCompat=\"@tools:sample/avatars\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/txtVoucherName\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"16sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/imgVoucher\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/imgVoucher\"\r\n        tools:text=\"TextView\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/txtExpiryDate\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginBottom=\"30dp\"\r\n        android:textColor=\"#7E7D7D\"\r\n        android:textSize=\"14sp\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/imgVoucher\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/imgVoucher\"\r\n        tools:text=\"TextView\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/txtTerm\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:text=\"T&amp;C\"\r\n        android:textColor=\"#FF0000\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/imgVoucher\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btnClaim\"\r\n        android:layout_width=\"77dp\"\r\n        android:layout_height=\"41dp\"\r\n        android:layout_marginEnd=\"20dp\"\r\n        android:backgroundTint=\"#EAEAEA\"\r\n        android:text=\"Claim\"\r\n        android:textSize=\"12sp\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/imgVoucher\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\" />\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/item_voucher.xml b/app/src/main/res/layout/item_voucher.xml
--- a/app/src/main/res/layout/item_voucher.xml	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/res/layout/item_voucher.xml	(date 1637476110467)
@@ -2,64 +2,93 @@
 <androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:tools="http://schemas.android.com/tools"
+    android:id="@+id/conLayout"
     android:layout_width="match_parent"
     android:layout_height="wrap_content">
 
-    <ImageView
-        android:id="@+id/imgVoucher"
-        android:layout_width="100dp"
-        android:layout_height="100dp"
-        android:layout_marginStart="20dp"
-        android:layout_marginTop="20dp"
-        android:layout_marginBottom="20dp"
-        app:layout_constraintBottom_toBottomOf="parent"
-        app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toTopOf="parent"
-        tools:srcCompat="@tools:sample/avatars" />
+    <androidx.cardview.widget.CardView
+        android:id="@+id/cv"
+        android:layout_width="0dp"
+        android:layout_height="100dp"
+        android:layout_marginStart="20dp"
+        android:layout_marginTop="10dp"
+        android:layout_marginEnd="20dp"
+        android:layout_marginBottom="10dp"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent">
+
+        <androidx.constraintlayout.widget.ConstraintLayout
+            android:layout_width="match_parent"
+            android:layout_height="match_parent">
+
+            <ImageView
+                android:id="@+id/imgVoucher"
+                android:layout_width="100dp"
+                android:layout_height="100dp"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toTopOf="parent"
+                tools:srcCompat="@tools:sample/avatars" />
 
-    <TextView
-        android:id="@+id/txtVoucherName"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_marginStart="20dp"
-        android:layout_marginTop="20dp"
-        android:textColor="#000000"
-        android:textSize="16sp"
-        android:textStyle="bold"
-        app:layout_constraintStart_toEndOf="@+id/imgVoucher"
-        app:layout_constraintTop_toTopOf="@+id/imgVoucher"
-        tools:text="TextView" />
+            <TextView
+                android:id="@+id/txtVoucherName"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="20dp"
+                android:layout_marginTop="20dp"
+                android:textColor="#000000"
+                android:textSize="16sp"
+                android:textStyle="bold"
+                app:layout_constraintStart_toEndOf="@+id/imgVoucher"
+                app:layout_constraintTop_toTopOf="@+id/imgVoucher"
+                tools:text="TextView" />
 
-    <TextView
-        android:id="@+id/txtExpiryDate"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_marginStart="20dp"
-        android:layout_marginBottom="30dp"
-        android:textColor="#7E7D7D"
-        android:textSize="14sp"
-        app:layout_constraintBottom_toBottomOf="@+id/imgVoucher"
-        app:layout_constraintStart_toEndOf="@+id/imgVoucher"
-        tools:text="TextView" />
+            <TextView
+                android:id="@+id/txtExpiryDate"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="20dp"
+                android:layout_marginBottom="35dp"
+                android:textColor="#7E7D7D"
+                android:textSize="14sp"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintStart_toEndOf="@+id/imgVoucher"
+                tools:text="TextView" />
 
-    <TextView
-        android:id="@+id/txtTerm"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_marginEnd="20dp"
-        android:text="T&amp;C"
-        android:textColor="#FF0000"
-        app:layout_constraintEnd_toEndOf="parent"
-        app:layout_constraintTop_toTopOf="@+id/imgVoucher" />
+            <TextView
+                android:id="@+id/txtTerm"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginEnd="5dp"
+                android:text="T&amp;C"
+                android:textColor="#FF0000"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintTop_toTopOf="parent" />
 
-    <Button
-        android:id="@+id/btnClaim"
-        android:layout_width="77dp"
-        android:layout_height="41dp"
-        android:layout_marginEnd="20dp"
-        android:backgroundTint="#EAEAEA"
-        android:text="Claim"
-        android:textSize="12sp"
-        app:layout_constraintBottom_toBottomOf="@+id/imgVoucher"
-        app:layout_constraintEnd_toEndOf="parent" />
+            <Button
+                android:id="@+id/btnClaim"
+                android:layout_width="77dp"
+                android:layout_height="41dp"
+                android:backgroundTint="#EAEAEA"
+                android:text="Claim"
+                android:textSize="12sp"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintEnd_toEndOf="parent" />
+
+            <ImageView
+                android:id="@+id/imgExpiry"
+                android:layout_width="100dp"
+                android:layout_height="wrap_content"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintTop_toTopOf="parent"
+                app:layout_constraintVertical_bias="0.0"
+                app:srcCompat="@drawable/expired" />
+
+        </androidx.constraintlayout.widget.ConstraintLayout>
+
+    </androidx.cardview.widget.CardView>
+
 </androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/drawable/ic_baseline_keyboard_arrow_right_24.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/drawable/ic_baseline_keyboard_arrow_right_24.xml b/app/src/main/res/drawable/ic_baseline_keyboard_arrow_right_24.xml
new file mode 100644
--- /dev/null	(date 1637498966834)
+++ b/app/src/main/res/drawable/ic_baseline_keyboard_arrow_right_24.xml	(date 1637498966834)
@@ -0,0 +1,5 @@
+<vector android:autoMirrored="true" android:height="25dp"
+    android:tint="?attr/colorControlNormal" android:viewportHeight="24"
+    android:viewportWidth="24" android:width="25dp" xmlns:android="http://schemas.android.com/apk/res/android">
+    <path android:fillColor="@android:color/white" android:pathData="M8.59,16.59L13.17,12 8.59,7.41 10,6l6,6 -6,6 -1.41,-1.41z"/>
+</vector>
Index: app/src/main/res/layout/fragment_list_voucher.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_list_voucher.xml b/app/src/main/res/layout/fragment_list_voucher.xml
new file mode 100644
--- /dev/null	(date 1637384113914)
+++ b/app/src/main/res/layout/fragment_list_voucher.xml	(date 1637384113914)
@@ -0,0 +1,20 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".UI.ListVoucherFragment">
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/rv"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        app:layoutManager="LinearLayoutManager"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        tools:listitem="@layout/item_voucher" />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/VoucherFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionapp.UI\r\n\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport androidx.core.os.bundleOf\r\nimport androidx.fragment.app.activityViewModels\r\nimport androidx.navigation.fragment.findNavController\r\nimport androidx.recyclerview.widget.DividerItemDecoration\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView\r\nimport my.com.fashionapp.R\r\nimport my.com.fashionapp.data.VoucherViewModel\r\nimport my.com.fashionapp.databinding.FragmentVoucherBinding\r\nimport my.com.fashionapp.util.ProductAdapter\r\nimport my.com.fashionapp.util.VoucherAdapter\r\n\r\n\r\nclass VoucherFragment : Fragment() {\r\n\r\n    private lateinit var binding: FragmentVoucherBinding\r\n    private val nav by lazy{ findNavController() }\r\n    private val vmV : VoucherViewModel by activityViewModels()\r\n\r\n    private lateinit var adapter: VoucherAdapter\r\n\r\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\r\n\r\n        binding = FragmentVoucherBinding.inflate(inflater, container, false)\r\n\r\n        //TODO\r\n\r\n        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)\r\n        btn.visibility = View.GONE\r\n\r\n        adapter = VoucherAdapter() { holder, voucher ->\r\n            // Item click\r\n            holder.root.setOnClickListener {\r\n                nav.navigate(R.id.productDetailFragment, bundleOf(\"id\" to voucher.voucherId))\r\n            }\r\n\r\n        }\r\n\r\n        binding.rv.adapter = adapter\r\n\r\n        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))\r\n\r\n        vmV.getResult().observe(viewLifecycleOwner) { list ->\r\n\r\n            val voucherArray = list.filter { v ->\r\n                v.voucherQuantity != 0\r\n            }\r\n            adapter.submitList(voucherArray)\r\n//            binding.txtItem.text = \"${list.size} product(s)\"\r\n        }\r\n\r\n\r\n        return binding.root\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/VoucherFragment.kt b/app/src/main/java/my/com/fashionapp/UI/VoucherFragment.kt
--- a/app/src/main/java/my/com/fashionapp/UI/VoucherFragment.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/UI/VoucherFragment.kt	(date 1637479217833)
@@ -5,59 +5,45 @@
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
-import androidx.core.os.bundleOf
 import androidx.fragment.app.activityViewModels
 import androidx.navigation.fragment.findNavController
-import androidx.recyclerview.widget.DividerItemDecoration
 import com.google.android.material.bottomnavigation.BottomNavigationView
 import my.com.fashionapp.R
 import my.com.fashionapp.data.VoucherViewModel
 import my.com.fashionapp.databinding.FragmentVoucherBinding
-import my.com.fashionapp.util.ProductAdapter
-import my.com.fashionapp.util.VoucherAdapter
+import my.com.fashionapp.util.ViewPageAdapter
 
 
 class VoucherFragment : Fragment() {
 
     private lateinit var binding: FragmentVoucherBinding
+
     private val nav by lazy{ findNavController() }
     private val vmV : VoucherViewModel by activityViewModels()
 
-    private lateinit var adapter: VoucherAdapter
-
     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
 
         binding = FragmentVoucherBinding.inflate(inflater, container, false)
-
-        //TODO
-
+        setupTabs()
         val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
         btn.visibility = View.GONE
 
-        adapter = VoucherAdapter() { holder, voucher ->
-            // Item click
-            holder.root.setOnClickListener {
-                nav.navigate(R.id.productDetailFragment, bundleOf("id" to voucher.voucherId))
-            }
-
-        }
-
-        binding.rv.adapter = adapter
-
-        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))
-
-        vmV.getResult().observe(viewLifecycleOwner) { list ->
-
-            val voucherArray = list.filter { v ->
-                v.voucherQuantity != 0
-            }
-            adapter.submitList(voucherArray)
-//            binding.txtItem.text = "${list.size} product(s)"
-        }
-
-
+        binding.imgVoucherBack.setOnClickListener { nav.navigate(R.id.action_voucherFragment_to_loginProfileFragment) }
+        binding.txtVoucherHistory.setOnClickListener { nav.navigate(R.id.voucherHistoryFragment) }
         return binding.root
     }
 
+    private fun setupTabs() {
+
+        val adapter = ViewPageAdapter(childFragmentManager)
+
+        adapter.addFragment(ListVoucherFragment(),"All")
+        adapter.addFragment(VoucherBagFragment(),"Bag")
+        binding.viewPager.adapter = adapter
+        binding.tabLayout.setupWithViewPager(binding.viewPager)
+
+
+    }
+
 
 }
\ No newline at end of file
Index: app/src/main/res/layout/fragment_voucher.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".UI.VoucherFragment\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imgVoucherBack\"\r\n        android:layout_width=\"25dp\"\r\n        android:layout_height=\"25dp\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:src=\"@drawable/ic_back\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/textView41\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/textView41\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView41\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:text=\"Voucher\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"24sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/txtVoucherHistory\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        android:text=\"History\"\r\n        android:textColor=\"#FF0000\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/textView41\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/textView41\" />\r\n\r\n    <com.google.android.material.bottomnavigation.BottomNavigationView\r\n        android:id=\"@+id/bottom_navigation\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"10dp\"\r\n        app:elevation=\"24dp\"\r\n        app:itemIconSize=\"30dp\"\r\n        app:itemIconTint=\"@drawable/item_selector\"\r\n        app:itemRippleColor=\"@android:color/transparent\"\r\n        app:labelVisibilityMode=\"labeled\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView41\"\r\n        app:menu=\"@menu/item_voucher\" />\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/rv\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        app:layoutManager=\"LinearLayoutManager\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/bottom_navigation\"\r\n        tools:listitem=\"@layout/item_voucher\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_voucher.xml b/app/src/main/res/layout/fragment_voucher.xml
--- a/app/src/main/res/layout/fragment_voucher.xml	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/res/layout/fragment_voucher.xml	(date 1637479236423)
@@ -10,7 +10,7 @@
         android:id="@+id/imgVoucherBack"
         android:layout_width="25dp"
         android:layout_height="25dp"
-        android:layout_marginStart="10dp"
+        android:layout_marginStart="20dp"
         android:src="@drawable/ic_back"
         app:layout_constraintBottom_toBottomOf="@+id/textView41"
         app:layout_constraintStart_toStartOf="parent"
@@ -41,30 +41,46 @@
         app:layout_constraintEnd_toEndOf="parent"
         app:layout_constraintTop_toTopOf="@+id/textView41" />
 
-    <com.google.android.material.bottomnavigation.BottomNavigationView
-        android:id="@+id/bottom_navigation"
-        android:layout_width="match_parent"
+<!--    <androidx.recyclerview.widget.RecyclerView-->
+<!--        android:id="@+id/rv"-->
+<!--        android:layout_width="0dp"-->
+<!--        android:layout_height="0dp"-->
+<!--        app:layoutManager="LinearLayoutManager"-->
+<!--        app:layout_constraintBottom_toBottomOf="parent"-->
+<!--        app:layout_constraintEnd_toEndOf="parent"-->
+<!--        app:layout_constraintStart_toStartOf="parent"-->
+<!--        app:layout_constraintTop_toBottomOf="@+id/tabLayout"-->
+<!--        tools:listitem="@layout/item_voucher" />-->
+
+    <com.google.android.material.tabs.TabLayout
+        android:id="@+id/tabLayout"
+        android:layout_width="409dp"
         android:layout_height="wrap_content"
         android:layout_marginTop="10dp"
-        app:elevation="24dp"
-        app:itemIconSize="30dp"
-        app:itemIconTint="@drawable/item_selector"
-        app:itemRippleColor="@android:color/transparent"
-        app:labelVisibilityMode="labeled"
         app:layout_constraintEnd_toEndOf="parent"
         app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/textView41"
-        app:menu="@menu/item_voucher" />
+        app:layout_constraintTop_toBottomOf="@+id/textView41">
+
+        <com.google.android.material.tabs.TabItem
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:text="All" />
 
-    <androidx.recyclerview.widget.RecyclerView
-        android:id="@+id/rv"
+        <com.google.android.material.tabs.TabItem
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:text="Bag" />
+
+    </com.google.android.material.tabs.TabLayout>
+
+    <androidx.viewpager.widget.ViewPager
+        android:id="@+id/viewPager"
         android:layout_width="0dp"
         android:layout_height="0dp"
-        app:layoutManager="LinearLayoutManager"
         app:layout_constraintBottom_toBottomOf="parent"
         app:layout_constraintEnd_toEndOf="parent"
         app:layout_constraintStart_toStartOf="parent"
-        app:layout_constraintTop_toBottomOf="@+id/bottom_navigation"
-        tools:listitem="@layout/item_voucher" />
+        app:layout_constraintTop_toBottomOf="@+id/tabLayout"
+        tools:ignore="SpeakableTextPresentCheck" />
 
 </androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_cart.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".UI.CartFragment\" >\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imgCartBack\"\r\n        android:layout_width=\"25dp\"\r\n        android:layout_height=\"25dp\"\r\n        android:layout_marginStart=\"30dp\"\r\n        android:src=\"@drawable/ic_back\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/textView\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/textView\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:text=\"@string/cart\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"30sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView4\"\r\n        android:layout_width=\"90dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"30dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:text=\"@string/subtotal\"\r\n        android:textColor=\"#939393\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/textView5\"\r\n        app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView5\"\r\n        android:layout_width=\"90dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"30dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:text=\"@string/shipping\"\r\n        android:textColor=\"#939393\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/textView10\"\r\n        app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView10\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"30dp\"\r\n        android:layout_marginEnd=\"30dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:text=\"@string/nothing\"\r\n        android:textColor=\"#939393\"\r\n        android:textSize=\"20sp\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/textView25\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/txtCartSubtotalPrice\"\r\n        android:layout_width=\"85dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginEnd=\"30dp\"\r\n        android:text=\"0.00\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"20sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/textView4\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/textView4\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView15\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginEnd=\"5dp\"\r\n        android:text=\"@string/rm\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"20sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/textView4\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/txtCartSubtotalPrice\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/textView4\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView19\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginEnd=\"5dp\"\r\n        android:text=\"@string/rm\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"20sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/textView5\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/txtCartShipping\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/textView5\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/txtCartShipping\"\r\n        android:layout_width=\"85dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginEnd=\"30dp\"\r\n        android:text=\"0.00\"\r\n        android:textColor=\"#000000\"\r\n        android:textSize=\"20sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/textView5\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/textView5\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView25\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"30dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:text=\"@string/total_price_rm\"\r\n        android:textSize=\"18sp\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/txtCartTotalPrice\"\r\n        app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/txtCartTotalPrice\"\r\n        android:layout_width=\"100dp\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_marginStart=\"30dp\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:text=\"0.00\"\r\n        android:textAlignment=\"center\"\r\n        android:textSize=\"20sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/btnCheckOut\"\r\n        app:layout_constraintStart_toStartOf=\"parent\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btnCheckOut\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"80dp\"\r\n        android:layout_marginStart=\"20dp\"\r\n        android:layout_marginEnd=\"30dp\"\r\n        android:backgroundTint=\"#FFC107\"\r\n        android:text=\"@string/checkout\"\r\n        android:textColor=\"#FFFFFF\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toEndOf=\"@+id/textView25\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView10\"\r\n        app:shapeAppearance=\"@style/RoundedSquare\" />\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/rv\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"0dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        app:layoutManager=\"LinearLayoutManager\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/textView4\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView\"\r\n        app:layout_constraintVertical_bias=\"0.0\"\r\n        tools:listitem=\"@layout/item_cart_product\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_cart.xml b/app/src/main/res/layout/fragment_cart.xml
--- a/app/src/main/res/layout/fragment_cart.xml	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/res/layout/fragment_cart.xml	(date 1637481570752)
@@ -10,7 +10,7 @@
         android:id="@+id/imgCartBack"
         android:layout_width="25dp"
         android:layout_height="25dp"
-        android:layout_marginStart="30dp"
+        android:layout_marginStart="20dp"
         android:src="@drawable/ic_back"
         app:layout_constraintBottom_toBottomOf="@+id/textView"
         app:layout_constraintStart_toStartOf="parent"
@@ -23,7 +23,7 @@
         android:layout_marginTop="20dp"
         android:text="@string/cart"
         android:textColor="#000000"
-        android:textSize="30sp"
+        android:textSize="24sp"
         android:textStyle="bold"
         app:layout_constraintEnd_toEndOf="parent"
         app:layout_constraintStart_toStartOf="parent"
@@ -37,7 +37,7 @@
         android:layout_marginBottom="10dp"
         android:text="@string/subtotal"
         android:textColor="#939393"
-        android:textSize="20sp"
+        android:textSize="16sp"
         app:layout_constraintBottom_toTopOf="@+id/textView5"
         app:layout_constraintStart_toStartOf="parent" />
 
@@ -49,7 +49,7 @@
         android:layout_marginBottom="10dp"
         android:text="@string/shipping"
         android:textColor="#939393"
-        android:textSize="20sp"
+        android:textSize="16sp"
         app:layout_constraintBottom_toTopOf="@+id/textView10"
         app:layout_constraintStart_toStartOf="parent" />
 
@@ -59,7 +59,7 @@
         android:layout_height="wrap_content"
         android:layout_marginStart="30dp"
         android:layout_marginEnd="30dp"
-        android:layout_marginBottom="10dp"
+        android:layout_marginBottom="8dp"
         android:text="@string/nothing"
         android:textColor="#939393"
         android:textSize="20sp"
@@ -75,7 +75,7 @@
         android:layout_marginEnd="30dp"
         android:text="0.00"
         android:textColor="#000000"
-        android:textSize="20sp"
+        android:textSize="16sp"
         android:textStyle="bold"
         app:layout_constraintBottom_toBottomOf="@+id/textView4"
         app:layout_constraintEnd_toEndOf="parent"
@@ -88,7 +88,7 @@
         android:layout_marginEnd="5dp"
         android:text="@string/rm"
         android:textColor="#000000"
-        android:textSize="20sp"
+        android:textSize="16sp"
         android:textStyle="bold"
         app:layout_constraintBottom_toBottomOf="@+id/textView4"
         app:layout_constraintEnd_toStartOf="@+id/txtCartSubtotalPrice"
@@ -101,7 +101,7 @@
         android:layout_marginEnd="5dp"
         android:text="@string/rm"
         android:textColor="#000000"
-        android:textSize="20sp"
+        android:textSize="16sp"
         android:textStyle="bold"
         app:layout_constraintBottom_toBottomOf="@+id/textView5"
         app:layout_constraintEnd_toStartOf="@+id/txtCartShipping"
@@ -114,7 +114,7 @@
         android:layout_marginEnd="30dp"
         android:text="0.00"
         android:textColor="#000000"
-        android:textSize="20sp"
+        android:textSize="16sp"
         android:textStyle="bold"
         app:layout_constraintBottom_toBottomOf="@+id/textView5"
         app:layout_constraintEnd_toEndOf="parent"
@@ -134,13 +134,13 @@
     <TextView
         android:id="@+id/txtCartTotalPrice"
         android:layout_width="100dp"
-        android:layout_height="50dp"
+        android:layout_height="40dp"
         android:layout_marginStart="30dp"
         android:layout_marginEnd="10dp"
         android:layout_marginBottom="10dp"
         android:text="0.00"
         android:textAlignment="center"
-        android:textSize="20sp"
+        android:textSize="16sp"
         android:textStyle="bold"
         app:layout_constraintBottom_toBottomOf="parent"
         app:layout_constraintEnd_toStartOf="@+id/btnCheckOut"
@@ -149,7 +149,7 @@
     <Button
         android:id="@+id/btnCheckOut"
         android:layout_width="0dp"
-        android:layout_height="80dp"
+        android:layout_height="60dp"
         android:layout_marginStart="20dp"
         android:layout_marginEnd="30dp"
         android:backgroundTint="#FFC107"
Index: app/src/main/java/my/com/fashionapp/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionapp\r\n\r\nimport android.content.Context\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport androidx.activity.viewModels\r\nimport androidx.navigation.fragment.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport my.com.fashionapp.data.UserViewModel\r\nimport my.com.fashionapp.databinding.ActivityMainBinding\r\nimport my.com.fashionappstaff.data.emailAdress\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n\r\n    private lateinit var binding: ActivityMainBinding\r\n    private val vm: UserViewModel by viewModels()\r\n    private lateinit var abc: AppBarConfiguration\r\n    private val nav by lazy { supportFragmentManager.findFragmentById(R.id.host)!!.findNavController() }\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityMainBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        val preferences = getSharedPreferences(\"email\", Context.MODE_PRIVATE)\r\n        val emailLogin = preferences?.getString(\"emailLogin\",\"\")\r\n\r\n        if (emailLogin != null) {\r\n            navi(emailLogin)\r\n        }\r\n\r\n    }\r\n\r\n\r\n    fun navi(email: String) {\r\n\r\n        binding.bottomNavigation.setOnItemSelectedListener {\r\n            if(email == \"\"){\r\n                when (it.itemId) {\r\n                    R.id.nav_home -> nav.navigate(R.id.action_global_homeFragment)\r\n                    R.id.nav_shop -> nav.navigate(R.id.action_global_categoryFragment)\r\n                    R.id.nav_profile -> nav.navigate(R.id.action_global_profileFragment2)\r\n                    R.id.nav_cart -> nav.navigate(R.id.emptyCartFragment)\r\n                }\r\n            } else {\r\n                when (it.itemId) {\r\n                    R.id.nav_home -> nav.navigate(R.id.action_global_homeFragment)\r\n                    R.id.nav_shop -> nav.navigate(R.id.action_global_categoryFragment)\r\n                    R.id.nav_profile -> nav.navigate(R.id.action_global_loginProfileFragment)\r\n                    R.id.nav_cart -> nav.navigate(R.id.cartFragment)\r\n                }\r\n            }\r\n            true\r\n        }\r\n\r\n    }\r\n\r\n    override fun onBackPressed() {\r\n\r\n        val num = nav.currentDestination?.label\r\n\r\n        when(num){\r\n            \"fragment_home\"          -> super.finish()\r\n            \"fragment_category\"      -> super.finish()\r\n            \"fragment_profile\"       -> super.finish()\r\n            \"fragment_login_profile\" -> super.finish()\r\n            \"fragment_cart\"          -> super.finish()\r\n            \"fragment_empty_cart\"    -> super.finish()\r\n        }\r\n        nav.popBackStack()\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        return nav.navigateUp() || super.onSupportNavigateUp()\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/MainActivity.kt b/app/src/main/java/my/com/fashionapp/MainActivity.kt
--- a/app/src/main/java/my/com/fashionapp/MainActivity.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/MainActivity.kt	(date 1637511816160)
@@ -19,6 +19,7 @@
 
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
+        vm.getAll()
         binding = ActivityMainBinding.inflate(layoutInflater)
         setContentView(binding.root)
 
Index: app/src/main/res/layout/fragment_voucher_history.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_voucher_history.xml b/app/src/main/res/layout/fragment_voucher_history.xml
new file mode 100644
--- /dev/null	(date 1637479236417)
+++ b/app/src/main/res/layout/fragment_voucher_history.xml	(date 1637479236417)
@@ -0,0 +1,65 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".UI.VoucherHistoryFragment">
+
+
+    <TextView
+        android:id="@+id/textView43"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginTop="20dp"
+        android:text="History"
+        android:textColor="#000000"
+        android:textSize="24sp"
+        android:textStyle="bold"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="0.498"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent" />
+
+    <ImageView
+        android:id="@+id/imgHistoryBack"
+        android:layout_width="25dp"
+        android:layout_height="25dp"
+        android:layout_marginStart="20dp"
+        android:src="@drawable/ic_back"
+        app:layout_constraintBottom_toBottomOf="@+id/textView43"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="@+id/textView43" />
+
+    <com.google.android.material.tabs.TabLayout
+        android:id="@+id/tablayoutHistory"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginTop="10dp"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/textView43">
+
+        <com.google.android.material.tabs.TabItem
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:text="Invalid" />
+
+        <com.google.android.material.tabs.TabItem
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:text="Used" />
+
+    </com.google.android.material.tabs.TabLayout>
+
+    <androidx.viewpager.widget.ViewPager
+        android:id="@+id/viewPager"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/tablayoutHistory"
+        tools:ignore="SpeakableTextPresentCheck" />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/util/ViewPageAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/util/ViewPageAdapter.kt b/app/src/main/java/my/com/fashionapp/util/ViewPageAdapter.kt
new file mode 100644
--- /dev/null	(date 1637415475101)
+++ b/app/src/main/java/my/com/fashionapp/util/ViewPageAdapter.kt	(date 1637415475101)
@@ -0,0 +1,30 @@
+package my.com.fashionapp.util
+
+import androidx.fragment.app.Fragment
+import androidx.fragment.app.FragmentManager
+import androidx.fragment.app.FragmentPagerAdapter
+
+class ViewPageAdapter(supportFragmentManager: FragmentManager) : FragmentPagerAdapter(supportFragmentManager, BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT) {
+
+    private val fragmentList = ArrayList<Fragment>()
+    private val fragmentTitle = ArrayList<String>()
+
+
+    override fun getCount(): Int {
+        return fragmentList.size
+    }
+
+    override fun getItem(position: Int): Fragment {
+        return fragmentList[position]
+    }
+
+    override fun getPageTitle(position: Int): CharSequence? {
+        return fragmentTitle[position]
+    }
+
+    fun addFragment(fragment: Fragment, title: String){
+        fragmentList.add(fragment)
+        fragmentTitle.add(title)
+    }
+
+}
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/VoucherHistoryFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/VoucherHistoryFragment.kt b/app/src/main/java/my/com/fashionapp/UI/VoucherHistoryFragment.kt
new file mode 100644
--- /dev/null	(date 1637473594129)
+++ b/app/src/main/java/my/com/fashionapp/UI/VoucherHistoryFragment.kt	(date 1637473594129)
@@ -0,0 +1,47 @@
+package my.com.fashionapp.UI
+
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.findNavController
+import com.google.android.material.bottomnavigation.BottomNavigationView
+import my.com.fashionapp.R
+import my.com.fashionapp.data.VoucherViewModel
+import my.com.fashionapp.databinding.FragmentVoucherHistoryBinding
+import my.com.fashionapp.util.ViewPageHistoryAdapter
+
+class VoucherHistoryFragment : Fragment() {
+
+    private lateinit var binding: FragmentVoucherHistoryBinding
+    private val nav by lazy{ findNavController() }
+    private val vmV : VoucherViewModel by activityViewModels()
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
+        binding = FragmentVoucherHistoryBinding.inflate(inflater, container, false)
+
+        setupTabs()
+        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
+        btn.visibility = View.GONE
+
+        binding.imgHistoryBack.setOnClickListener { nav.navigate(R.id.action_voucherHistoryFragment_to_voucherFragment) }
+
+
+        return binding.root
+    }
+
+    private fun setupTabs() {
+
+        val adapter = ViewPageHistoryAdapter(childFragmentManager)
+
+        adapter.addFragment(VoucherInvalidFragment(),"Invalid")
+        adapter.addFragment(VoucherUsedFragment(),"Used")
+        binding.viewPager.adapter = adapter
+        binding.tablayoutHistory.setupWithViewPager(binding.viewPager)
+
+
+    }
+
+}
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/categoryshape.xml\" value=\"0.24444444444444444\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/circle.xml\" value=\"0.24444444444444444\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/item_selector.xml\" value=\"0.24444444444444444\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/activity_main.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/activity_razor.xml\" value=\"0.3729166666666667\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/activity_stripe.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_cart.xml\" value=\"0.38697916666666665\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_checkout_stripe.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_delivery.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_empty_cart.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_login_profile.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_order_history.xml\" value=\"0.38697916666666665\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_payment_history.xml\" value=\"0.38697916666666665\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_payment_method.xml\" value=\"0.38697916666666665\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_payment_razorpay.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_product_detail.xml\" value=\"0.38697916666666665\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_shop.xml\" value=\"0.38697916666666665\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_sign_in.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_voucher.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_cart_product.xml\" value=\"0.38697916666666665\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_history.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_order.xml\" value=\"0.38697916666666665\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_product.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_voucher.xml\" value=\"0.4\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/menu/item_delivery_status.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/menu/item_menu.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/menu/item_voucher.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/menu/menu_close.xml\" value=\"0.27447916666666666\" />\r\n        <entry key=\"..\\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/xml/network_security_config.xml\" value=\"0.27447916666666666\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"11\" project-jdk-type=\"JavaSDK\" />\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/.idea/misc.xml	(date 1637516380602)
@@ -4,28 +4,48 @@
     <option name="filePathToZoomLevelMap">
       <map>
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/categoryshape.xml" value="0.24444444444444444" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/categoryshape1.xml" value="0.28615384615384615" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/circle.xml" value="0.24444444444444444" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/customshape.xml" value="0.2712962962962963" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/expired.xml" value="0.28615384615384615" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/item_selector.xml" value="0.24444444444444444" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/round_corner.xml" value="0.28615384615384615" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/round_corner2.xml" value="0.28615384615384615" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/drawable/round_corner3.xml" value="0.28615384615384615" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/activity_main.xml" value="0.27447916666666666" />
-        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/activity_razor.xml" value="0.3729166666666667" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/activity_razor.xml" value="0.264" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/activity_stripe.xml" value="0.25" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_cart.xml" value="0.38697916666666665" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_category.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_category_detail.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_checkout_stripe.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_delivery.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_empty_cart.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_empty_cart_login.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_list_voucher.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_login_profile.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_order_history.xml" value="0.38697916666666665" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_payment_history.xml" value="0.38697916666666665" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_payment_method.xml" value="0.38697916666666665" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_payment_razorpay.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_product_detail.xml" value="0.38697916666666665" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_razor_pay.xml" value="0.2604166666666667" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_shop.xml" value="0.38697916666666665" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_sign_in.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_term_n_condition.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_voucher.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_voucher_apply.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_voucher_bag.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_voucher_history.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_voucher_invalid.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/fragment_voucher_used.xml" value="0.264" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_cart_product.xml" value="0.38697916666666665" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_history.xml" value="0.264" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_order.xml" value="0.38697916666666665" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_payproduct.xml" value="0.4" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_product.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_reward.xml" value="0.27447916666666666" />
+        <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_reward_history.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/layout/item_voucher.xml" value="0.4" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/menu/item_delivery_status.xml" value="0.27447916666666666" />
         <entry key="..\:/Users/xiaoz/Desktop/FashionApp/app/src/main/res/menu/item_menu.xml" value="0.27447916666666666" />
Index: app/src/main/java/my/com/fashionapp/UI/ListVoucherFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/ListVoucherFragment.kt b/app/src/main/java/my/com/fashionapp/UI/ListVoucherFragment.kt
new file mode 100644
--- /dev/null	(date 1637478226421)
+++ b/app/src/main/java/my/com/fashionapp/UI/ListVoucherFragment.kt	(date 1637478226421)
@@ -0,0 +1,123 @@
+package my.com.fashionapp.UI
+
+import android.content.Context
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import androidx.core.os.bundleOf
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.findNavController
+import androidx.recyclerview.widget.DividerItemDecoration
+import com.google.android.material.bottomnavigation.BottomNavigationView
+import my.com.fashionapp.R
+import my.com.fashionapp.data.UserViewModel
+import my.com.fashionapp.data.VoucherClaimViewModel
+import my.com.fashionapp.data.VoucherViewModel
+import my.com.fashionapp.databinding.FragmentListVoucherBinding
+import my.com.fashionapp.util.VoucherAdapter
+import my.com.fashionappstaff.data.Voucher
+import my.com.fashionappstaff.data.VoucherClaim
+import java.time.LocalDate
+import java.time.format.DateTimeFormatter
+
+class ListVoucherFragment : Fragment() {
+
+    private lateinit var binding : FragmentListVoucherBinding
+    private val nav by lazy{ findNavController() }
+    private val vmV : VoucherViewModel by activityViewModels()
+    private val vmVC : VoucherClaimViewModel by activityViewModels()
+    private val vmU  : UserViewModel by activityViewModels()
+
+    private lateinit var adapter: VoucherAdapter
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
+
+        binding = FragmentListVoucherBinding.inflate(inflater,container, false)
+
+        vmV.getAll()
+        val preferences = activity?.getSharedPreferences("email", Context.MODE_PRIVATE)
+        val emailLogin = preferences?.getString("emailLogin","")
+
+        val user = emailLogin?.let { vmU.getEmail(it) }
+
+
+        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
+        btn.visibility = View.GONE
+
+        adapter = VoucherAdapter() { holder, voucher ->
+            // Item click
+
+            val id1 = vmVC.getitem(voucher.voucherId)
+
+            if (id1 != null) {
+                if(id1.voucherId == voucher.voucherId){
+                    holder.btnClaim.text = "Use"
+                    holder.btnClaim.isEnabled = false
+                }
+            }
+
+            holder.imgExpiry.visibility = View.GONE
+            holder.txtTerm.setOnClickListener {
+                nav.navigate(R.id.termNConditionFragment, bundleOf("id" to voucher.voucherId))
+            }
+
+            //Claim Voucher
+            holder.btnClaim.setOnClickListener {
+
+
+                val vcId = vmVC.validID()
+
+                val vc = VoucherClaim(
+                    voucherClaimID = vcId,
+                    voucherId = voucher.voucherId,
+                    claimUser = user!!.userName,
+                    voucherClaimImg = voucher.voucherImg,
+                    voucherClaimName = voucher.voucherName,
+                    voucherClaimQuantity = 1,
+                    voucherClaimExpiryDate = voucher.voucherExpiryDate,
+                    voucherValue = voucher.voucherValue,
+                    voucherStatus = "Claim"
+                )
+                vmVC.set(vc)
+                val v = Voucher(
+                    voucherId = voucher.voucherId,
+                    voucherImg = voucher.voucherImg,
+                    voucherName = voucher.voucherName,
+                    voucherTerm = voucher.voucherTerm,
+                    voucherDescription = voucher.voucherDescription,
+                    voucherQuantity = voucher.voucherQuantity - 1,
+                    voucherDate = voucher.voucherDate,
+                    voucherExpiryDate = voucher.voucherExpiryDate,
+                    voucherValue = voucher.voucherValue,
+                )
+                vmV.set(v)
+
+                holder.btnClaim.text = "USE"
+                holder.btnClaim.isEnabled = false
+            }
+
+        }
+
+        binding.rv.adapter = adapter
+
+        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))
+
+        val currentDate = LocalDate.now()
+        val viewFormatter = DateTimeFormatter.ofPattern("dd MMM, YYYY")
+        val formatDate = viewFormatter.format(currentDate)
+
+        vmV.getResult().observe(viewLifecycleOwner) { list ->
+
+            val voucherArray = list.filter { v ->
+                v.voucherQuantity != 0 && v.voucherExpiryDate > formatDate
+            }
+
+            adapter.submitList(voucherArray)
+        }
+
+        return binding.root
+    }
+
+}
\ No newline at end of file
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>plugins {\r\n    id 'com.android.application'\r\n    id 'kotlin-android'\r\n    id 'kotlin-kapt'\r\n    id 'kotlin-android-extensions'\r\n\r\n    // TODO: Google services\r\n    id 'com.google.gms.google-services'\r\n}\r\n\r\nandroid {\r\n    compileSdk 31\r\n    buildToolsVersion \"31\"\r\n\r\n    defaultConfig {\r\n        applicationId \"my.com.fashionapp\"\r\n        minSdk 26\r\n        targetSdk 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n//        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\r\n\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = '1.8'\r\n    }\r\n    buildFeatures {\r\n        viewBinding true\r\n    }\r\n    packagingOptions {\r\n        exclude 'META-INF/NOTICE.md'\r\n        exclude 'META-INF/LICENSE.md'\r\n    }\r\n}\r\nrepositories {\r\n    mavenCentral()\r\n}\r\ndependencies {\r\n\r\n    implementation 'androidx.core:core-ktx:1.7.0'\r\n    implementation 'androidx.appcompat:appcompat:1.3.1'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.1'\r\n\r\n    // Navigation\r\n    implementation 'androidx.navigation:navigation-fragment-ktx:2.3.5'\r\n    implementation 'androidx.navigation:navigation-ui-ktx:2.3.5'\r\n\r\n    // Firestore\r\n    implementation 'com.google.firebase:firebase-firestore-ktx:24.0.0'\r\n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-play-services:1.5.2-native-mt'\r\n\r\n    // Dependency for material Components\r\n    implementation 'com.google.android.material:material:1.4.0'\r\n\r\n    //Authentication\r\n    implementation 'com.google.firebase:firebase-auth-ktx:21.0.1'\r\n    implementation 'androidx.annotation:annotation:1.3.0'\r\n    implementation 'androidx.lifecycle:lifecycle-livedata-ktx:2.4.0'\r\n    implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.4.0'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n\r\n    //Email\r\n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.5.2'\r\n    implementation 'com.sun.mail:android-mail:1.6.7'\r\n    implementation 'com.sun.mail:android-activation:1.6.7'\r\n    implementation 'androidx.security:security-crypto:1.0.0'\r\n\r\n    implementation 'com.braintreepayments:card-form:5.2.0'\r\n\r\n    //QR Code\r\n    implementation 'com.google.zxing:core:3.4.1'\r\n    implementation 'com.journeyapps:zxing-android-embedded:4.3.0'\r\n\r\n    //Razorpay\r\n    implementation 'com.razorpay:checkout:1.6.12'\r\n\r\n    implementation 'com.squareup.retrofit2:retrofit:2.3.0'\r\n    implementation 'com.squareup.retrofit2:converter-gson:2.3.0'\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/build.gradle b/app/build.gradle
--- a/app/build.gradle	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/build.gradle	(date 1637526333398)
@@ -82,7 +82,7 @@
     implementation 'com.journeyapps:zxing-android-embedded:4.3.0'
 
     //Razorpay
-    implementation 'com.razorpay:checkout:1.6.12'
+    implementation 'com.razorpay:checkout:1.6.8'
 
     implementation 'com.squareup.retrofit2:retrofit:2.3.0'
     implementation 'com.squareup.retrofit2:converter-gson:2.3.0'
Index: app/src/main/java/my/com/fashionapp/UI/EmptyCartLogin.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionapp.UI\r\n\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport androidx.fragment.app.DialogFragment\r\nimport androidx.navigation.fragment.findNavController\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView\r\nimport my.com.fashionapp.R\r\nimport my.com.fashionapp.databinding.FragmentEmptyCartLoginBinding\r\n\r\nclass EmptyCartLogin : DialogFragment() {\r\n\r\n    private lateinit var binding: FragmentEmptyCartLoginBinding\r\n\r\n    private val nav by lazy{ findNavController() }\r\n\r\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\r\n        // Inflate the layout for this fragment\r\n        binding = FragmentEmptyCartLoginBinding.inflate(inflater, container, false)\r\n        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)\r\n        btn.visibility = View.VISIBLE\r\n\r\n        binding.btnContShopping.setOnClickListener { nav.navigate(R.id.action_global_homeFragment) }\r\n\r\n        return binding.root\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/EmptyCartLogin.kt b/app/src/main/java/my/com/fashionapp/UI/EmptyCartLogin.kt
--- a/app/src/main/java/my/com/fashionapp/UI/EmptyCartLogin.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/UI/EmptyCartLogin.kt	(date 1637515929974)
@@ -20,6 +20,7 @@
     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
         // Inflate the layout for this fragment
         binding = FragmentEmptyCartLoginBinding.inflate(inflater, container, false)
+
         val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
         btn.visibility = View.VISIBLE
 
Index: app/src/main/res/layout/fragment_term_n_condition.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_term_n_condition.xml b/app/src/main/res/layout/fragment_term_n_condition.xml
new file mode 100644
--- /dev/null	(date 1637382856975)
+++ b/app/src/main/res/layout/fragment_term_n_condition.xml	(date 1637382856975)
@@ -0,0 +1,199 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".UI.TermNConditionFragment" >
+
+    <androidx.appcompat.widget.Toolbar
+        android:id="@+id/toolbar2"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:background="@color/primary"
+        android:backgroundTint="#FFFFFF"
+        android:minHeight="?attr/actionBarSize"
+        android:theme="?attr/actionBarTheme"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent" />
+
+    <TextView
+        android:id="@+id/textView42"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:text="Voucher T&amp;C"
+        android:textColor="#000000"
+        android:textSize="24sp"
+        android:textStyle="bold"
+        app:layout_constraintBottom_toBottomOf="@+id/toolbar2"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="@+id/toolbar2"
+        app:layout_constraintTop_toTopOf="@+id/toolbar2" />
+
+    <ImageView
+        android:id="@+id/imgVoucherBack2"
+        android:layout_width="25dp"
+        android:layout_height="25dp"
+        android:layout_marginStart="20dp"
+        android:src="@drawable/ic_back"
+        app:layout_constraintBottom_toBottomOf="@+id/textView42"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="@+id/textView42" />
+
+    <com.google.android.material.bottomnavigation.BottomNavigationView
+        android:id="@+id/bottomNavigationView2"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent">
+
+        <androidx.constraintlayout.widget.ConstraintLayout
+            android:layout_width="match_parent"
+            android:layout_height="match_parent">
+
+            <Button
+                android:id="@+id/btnOk"
+                android:layout_width="0dp"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="20dp"
+                android:layout_marginTop="10dp"
+                android:layout_marginEnd="20dp"
+                android:layout_marginBottom="10dp"
+                android:backgroundTint="#EFEFEF"
+                android:text="OK"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toTopOf="parent" />
+        </androidx.constraintlayout.widget.ConstraintLayout>
+    </com.google.android.material.bottomnavigation.BottomNavigationView>
+
+    <LinearLayout
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        android:orientation="vertical"
+        app:layout_constraintBottom_toTopOf="@+id/bottomNavigationView2"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/toolbar2">
+
+        <androidx.constraintlayout.widget.ConstraintLayout
+            android:layout_width="match_parent"
+            android:layout_height="match_parent">
+
+            <RelativeLayout
+                android:id="@+id/relativeMen"
+                android:layout_width="0dp"
+                android:layout_height="120dp"
+                android:layout_marginStart="20dp"
+                android:layout_marginTop="20dp"
+                android:layout_marginEnd="20dp"
+                android:background="@drawable/customshape"
+                android:backgroundTint="#FFFFFF"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toTopOf="parent">
+
+                <androidx.constraintlayout.widget.ConstraintLayout
+                    android:layout_width="match_parent"
+                    android:layout_height="match_parent"
+                    android:background="@drawable/customshape">
+
+                    <ImageView
+                        android:id="@+id/imgVoucher2"
+                        android:layout_width="120dp"
+                        android:layout_height="120dp"
+                        android:layout_marginTop="20dp"
+                        android:layout_marginBottom="20dp"
+                        app:layout_constraintBottom_toBottomOf="parent"
+                        app:layout_constraintStart_toStartOf="parent"
+                        app:layout_constraintTop_toTopOf="parent"
+                        tools:srcCompat="@tools:sample/avatars" />
+
+                    <TextView
+                        android:id="@+id/txtVoucherName"
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:layout_marginStart="20dp"
+                        android:layout_marginTop="15dp"
+                        android:textSize="16sp"
+                        android:textStyle="bold"
+                        app:layout_constraintStart_toEndOf="@+id/imgVoucher2"
+                        app:layout_constraintTop_toTopOf="@+id/imgVoucher2"
+                        tools:text="TextView" />
+
+                    <TextView
+                        android:id="@+id/txtCondition"
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:layout_marginStart="20dp"
+                        android:layout_marginTop="5dp"
+                        app:layout_constraintStart_toEndOf="@+id/imgVoucher2"
+                        app:layout_constraintTop_toBottomOf="@+id/txtVoucherName"
+                        tools:text="TextView" />
+
+                    <TextView
+                        android:id="@+id/txtValidDate"
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:layout_marginStart="20dp"
+                        android:layout_marginTop="5dp"
+                        android:textColor="#B6B6B6"
+                        app:layout_constraintStart_toEndOf="@+id/imgVoucher2"
+                        app:layout_constraintTop_toBottomOf="@+id/txtCondition"
+                        tools:text="TextView" />
+                </androidx.constraintlayout.widget.ConstraintLayout>
+            </RelativeLayout>
+
+            <TextView
+                android:id="@+id/textView52"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="20dp"
+                android:layout_marginTop="20dp"
+                android:text="Valid Time"
+                android:textColor="#000000"
+                android:textSize="16sp"
+                android:textStyle="bold"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/relativeMen" />
+
+            <TextView
+                android:id="@+id/txtValidTime"
+                android:layout_width="0dp"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="20dp"
+                android:layout_marginEnd="20dp"
+                android:text="TextView"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/textView52" />
+
+            <TextView
+                android:id="@+id/textView53"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="20dp"
+                android:layout_marginTop="30dp"
+                android:text="Term And Condition"
+                android:textColor="#000000"
+                android:textSize="16sp"
+                android:textStyle="bold"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/txtValidTime" />
+
+            <TextView
+                android:id="@+id/txtTerm"
+                android:layout_width="0dp"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="20dp"
+                android:layout_marginEnd="20dp"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toBottomOf="@+id/textView53"
+                tools:text="TextView" />
+        </androidx.constraintlayout.widget.ConstraintLayout>
+    </LinearLayout>
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/util/ViewPageHistoryAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/util/ViewPageHistoryAdapter.kt b/app/src/main/java/my/com/fashionapp/util/ViewPageHistoryAdapter.kt
new file mode 100644
--- /dev/null	(date 1637415475085)
+++ b/app/src/main/java/my/com/fashionapp/util/ViewPageHistoryAdapter.kt	(date 1637415475085)
@@ -0,0 +1,29 @@
+package my.com.fashionapp.util
+
+import androidx.fragment.app.Fragment
+import androidx.fragment.app.FragmentManager
+import androidx.fragment.app.FragmentPagerAdapter
+
+class ViewPageHistoryAdapter (supportFragmentManager: FragmentManager) : FragmentPagerAdapter(supportFragmentManager, BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT) {
+
+    private val fragmentList = ArrayList<Fragment>()
+    private val fragmentTitle = ArrayList<String>()
+
+
+    override fun getCount(): Int {
+        return fragmentList.size
+    }
+
+    override fun getItem(position: Int): Fragment {
+        return fragmentList[position]
+    }
+
+    override fun getPageTitle(position: Int): CharSequence? {
+        return fragmentTitle[position]
+    }
+
+    fun addFragment(fragment: Fragment, title: String){
+        fragmentList.add(fragment)
+        fragmentTitle.add(title)
+    }
+}
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/VoucherApplyFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/VoucherApplyFragment.kt b/app/src/main/java/my/com/fashionapp/UI/VoucherApplyFragment.kt
new file mode 100644
--- /dev/null	(date 1637528725775)
+++ b/app/src/main/java/my/com/fashionapp/UI/VoucherApplyFragment.kt	(date 1637528725775)
@@ -0,0 +1,70 @@
+package my.com.fashionapp.UI
+
+import android.content.Intent
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import androidx.core.os.bundleOf
+import androidx.fragment.app.DialogFragment
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.findNavController
+import androidx.recyclerview.widget.DividerItemDecoration
+import my.com.fashionapp.R
+import my.com.fashionapp.RazorActivity
+import my.com.fashionapp.data.VoucherClaimViewModel
+import my.com.fashionapp.databinding.FragmentVoucherApplyBinding
+import my.com.fashionapp.util.VoucherClaimAdapter
+import java.time.LocalDate
+import java.time.format.DateTimeFormatter
+
+class VoucherApplyFragment : DialogFragment() {
+
+    private lateinit var binding: FragmentVoucherApplyBinding
+    private val nav by lazy{ findNavController() }
+    private val vmVC : VoucherClaimViewModel by activityViewModels()
+
+    private lateinit var adapter: VoucherClaimAdapter
+
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
+        // Inflate the layout for this fragment
+        binding = FragmentVoucherApplyBinding.inflate(inflater, container, false)
+
+        adapter = VoucherClaimAdapter() { holder, voucherCliam ->
+            // Item click
+
+            holder.btnClaim.text = "Use"
+            holder.imgExpiry.visibility = View.GONE
+            holder.txtTerm.visibility = View.GONE
+
+            //Claim Voucher
+            holder.btnClaim.setOnClickListener {
+
+                nav.navigate(R.id.razorPayFragment, bundleOf("vID" to voucherCliam.voucherClaimID))
+            }
+
+        }
+
+        binding.rv.adapter = adapter
+
+        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))
+
+        val currentDate = LocalDate.now()
+        val viewFormatter = DateTimeFormatter.ofPattern("dd MMM, YYYY")
+        val formatDate = viewFormatter.format(currentDate)
+
+        vmVC.getResult().observe(viewLifecycleOwner) { list ->
+
+            val voucherArray = list.filter { v ->
+                v.voucherClaimQuantity != 0 && v.voucherClaimExpiryDate > formatDate
+            }
+
+            adapter.submitList(voucherArray)
+        }
+
+        return binding.root
+    }
+
+}
\ No newline at end of file
Index: app/src/main/res/drawable/expired.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/drawable/expired.xml b/app/src/main/res/drawable/expired.xml
new file mode 100644
--- /dev/null	(date 1637474790653)
+++ b/app/src/main/res/drawable/expired.xml	(date 1637474790653)
@@ -0,0 +1,42 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="512dp"
+    android:height="512dp"
+    android:viewportWidth="512"
+    android:viewportHeight="512">
+  <path
+      android:pathData="M53,166l0,15 -15.8,-0 -15.8,-0 -10.7,15 -10.7,14.9 7.6,10.8c4.3,5.9 7.7,11.3 7.7,11.8 0,0.6 -3.4,5.9 -7.7,11.8l-7.7,10.7 7.7,10.7c4.3,5.9 7.7,11.2 7.7,11.8 0,0.6 -3.4,5.9 -7.6,11.8l-7.7,10.8 10.7,14.9 10.7,15 15.8,-0 15.8,-0 0,15 0,15 90,-0 90,-0 0,-7.5 0,-7.5 -82.5,-0 -82.5,-0 0,-7.5 0,-7.5 187.5,-0 187.5,-0 0,7.5 0,7.5 -82.5,-0 -82.5,-0 0,7.5 0,7.5 90,-0 90,-0 0,-15 0,-15 16.3,-0 16.3,-0 10.7,-15 10.7,-14.9 -7.7,-10.8c-4.2,-5.9 -7.6,-11.2 -7.6,-11.8 0,-0.6 3.4,-5.9 7.7,-11.8l7.7,-10.7 -7.7,-10.7c-4.3,-5.9 -7.7,-11.2 -7.7,-11.8 0,-0.6 3.4,-5.9 7.6,-11.8l7.7,-10.8 -10.7,-14.9 -10.7,-15 -16.3,-0 -16.3,-0 0,-15 0,-15 -202.5,-0 -202.5,-0 0,15zM443,173.5l0,7.5 -169,-0 -169,-0 0,7.5 0,7.5 188.9,-0 188.9,-0 5.2,7.1c2.9,4 4.9,7.7 4.6,8.5 -0.3,0.8 -3.7,5.9 -7.6,11.4 -3.8,5.4 -7,10.1 -7,10.5 0,0.3 3.4,5.3 7.5,11.2 4.1,5.8 7.5,10.9 7.5,11.4 0,0.5 -3.4,5.6 -7.5,11.3 -4.1,5.7 -7.5,10.7 -7.5,11.1 0,0.3 3.2,5.1 7,10.5 3.9,5.5 7.3,10.6 7.6,11.4 0.3,0.8 -1.7,4.5 -4.6,8.5l-5.2,7.1 -226.8,-0 -226.8,-0 -5.2,-7.1c-2.9,-4 -4.9,-7.7 -4.6,-8.5 0.3,-0.8 3.7,-5.9 7.6,-11.4 3.8,-5.4 7,-10.2 7,-10.5 0,-0.4 -3.4,-5.4 -7.5,-11.1 -4.1,-5.7 -7.5,-10.9 -7.5,-11.4 0,-0.5 3.4,-5.7 7.5,-11.4 4.1,-5.7 7.5,-10.7 7.5,-11.1 0,-0.3 -3.2,-5.1 -7,-10.5 -3.9,-5.5 -7.3,-10.6 -7.6,-11.4 -0.3,-0.8 1.7,-4.5 4.6,-8.5l5.2,-7.1 30.4,-0 30.4,-0 0,-7.5 0,-7.5 -11,-0 -11,-0 0,-7.5 0,-7.5 187.5,-0 187.5,-0 0,7.5z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+  <path
+      android:pathData="M53,255.5l0,37.5 22.5,-0 22.6,-0 -0.3,-7.3 -0.3,-7.2 -14.7,-0.3 -14.8,-0.3 0,-7.4 0,-7.5 7.5,-0 7.6,-0 -0.3,-7.3 -0.3,-7.2 -7.2,-0.3 -7.3,-0.3 0,-7.4 0,-7.5 15,-0 15,-0 0,-7.5 0,-7.5 -22.5,-0 -22.5,-0 0,37.5z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+  <path
+      android:pathData="M113.1,220.2c0.7,1.3 5.7,9.8 11.1,19l9.8,16.7 -10,17.1c-5.5,9.3 -10.3,17.7 -10.6,18.5 -0.6,1.4 0.5,1.5 8.1,1.3l8.8,-0.3 5.8,-10.5c3.2,-5.8 6.2,-10.6 6.7,-10.8 0.4,-0.1 3.4,4.7 6.7,10.8l6,11 8.8,-0c4.9,-0 8.7,-0.4 8.5,-0.8 -0.1,-0.5 -5,-8.8 -10.6,-18.5l-10.4,-17.7 10.4,-17.8c5.6,-9.7 10.4,-18.2 10.6,-18.9 0.3,-1 -1.8,-1.3 -8.2,-1.3l-8.5,-0 -6.3,11.5c-3.5,6.3 -6.6,11.5 -7,11.5 -0.3,-0 -3.5,-5.2 -6.9,-11.5l-6.2,-11.5 -8.9,-0 -8.9,-0 1.2,2.2z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+  <path
+      android:pathData="M188,255.5l0,37.5 7.5,-0 7.4,-0 0.3,-14.8 0.3,-14.7 7.5,-0.6c8.2,-0.6 12.1,-2.2 16.1,-6.6 4.3,-4.5 6,-8.9 6,-15.2 0.1,-7.2 -2.4,-12.5 -8.2,-17.4 -5.2,-4.5 -10.6,-5.7 -25.4,-5.7l-11.5,-0 0,37.5zM216,235.5c2.5,2.2 2.7,8.1 0.3,10.7 -1.2,1.3 -3.1,1.8 -7.5,1.8l-5.8,-0 0,-6.8c0,-3.8 0.3,-7.2 0.8,-7.6 1.3,-1.4 10.1,-0 12.2,1.9z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+  <path
+      android:pathData="M248.7,218.7c-0.4,0.3 -0.7,17.2 -0.7,37.5l0,36.8 7.5,-0 7.5,-0 0,-37.5 0,-37.5 -6.8,-0c-3.8,-0 -7.2,0.3 -7.5,0.7z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+  <path
+      android:pathData="M278,255.5l0,37.5 7.5,-0 7.4,-0 0.3,-12.7 0.3,-12.7 5.6,12.5 5.6,12.4 9.1,0.3c5.1,0.1 9.2,-0 9.2,-0.3 0,-0.3 -3.4,-7.2 -7.5,-15.5 -7,-13.9 -7.3,-14.9 -5.4,-15.5 3.3,-1.1 8.9,-6.5 11.1,-10.8 2.7,-5.4 2.7,-14 -0.1,-19.4 -2.9,-5.9 -9.3,-11 -15.3,-12.2 -2.7,-0.6 -10.1,-1.1 -16.3,-1.1l-11.5,-0 0,37.5zM306,235.5c2.5,2.2 2.7,8.1 0.3,10.7 -1.2,1.3 -3.1,1.8 -7.5,1.8l-5.8,-0 0,-6.8c0,-3.8 0.3,-7.2 0.8,-7.6 1.3,-1.4 10.1,-0 12.2,1.9z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+  <path
+      android:pathData="M338,255.5l0,37.5 22.5,-0 22.5,-0 0,-7.5 0,-7.5 -15,-0 -15.1,-0 0.3,-7.3 0.3,-7.2 7.3,-0.3 7.2,-0.3 0,-7.4 0,-7.5 -7.5,-0 -7.6,-0 0.3,-7.3 0.3,-7.2 14.8,-0.3 14.7,-0.3 0,-7.4 0,-7.5 -22.5,-0 -22.5,-0 0,37.5z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+  <path
+      android:pathData="M398,255.5l0,37.5 15.5,-0c13.2,-0 16.2,-0.3 21,-2.1 7.7,-2.9 15.6,-10.4 19.7,-18.7 3.1,-6.2 3.3,-7.4 3.3,-16.7 0,-9 -0.3,-10.6 -2.8,-15.8 -1.6,-3.2 -5.1,-8 -7.7,-10.6 -8.8,-8.8 -16.5,-11.1 -36.6,-11.1l-12.4,-0 0,37.5zM430.7,235.3c13.8,7.2 16.5,26.6 5.2,37.4 -4.5,4.2 -7.7,5.3 -16,5.3l-6.9,-0 0,-21.8c0,-12 0.3,-22.2 0.8,-22.6 1.1,-1.2 13.7,0.1 16.9,1.7z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+  <path
+      android:pathData="M248,353.5l0,7.5 7.5,-0 7.5,-0 0,-7.5 0,-7.5 -7.5,-0 -7.5,-0 0,7.5z"
+      android:fillColor="#000000"
+      android:strokeColor="#00000000"/>
+</vector>
Index: app/src/main/res/layout/fragment_voucher_apply.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_voucher_apply.xml b/app/src/main/res/layout/fragment_voucher_apply.xml
new file mode 100644
--- /dev/null	(date 1637517579982)
+++ b/app/src/main/res/layout/fragment_voucher_apply.xml	(date 1637517579982)
@@ -0,0 +1,21 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".UI.VoucherApplyFragment">
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/rv"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        app:layoutManager="LinearLayoutManager"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="1.0"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        tools:listitem="@layout/item_voucher" />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/RazorPayFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/RazorPayFragment.kt b/app/src/main/java/my/com/fashionapp/UI/RazorPayFragment.kt
new file mode 100644
--- /dev/null	(date 1637529028403)
+++ b/app/src/main/java/my/com/fashionapp/UI/RazorPayFragment.kt	(date 1637529028403)
@@ -0,0 +1,169 @@
+package my.com.fashionapp.UI
+
+import android.content.Context
+import android.content.Intent
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import android.widget.Toast
+import androidx.activity.viewModels
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.findNavController
+import androidx.recyclerview.widget.DividerItemDecoration
+import com.razorpay.Checkout
+import com.razorpay.PaymentResultListener
+import kotlinx.android.synthetic.main.activity_razor.*
+import my.com.fashionapp.MainActivity
+import my.com.fashionapp.R
+import my.com.fashionapp.data.*
+import my.com.fashionapp.databinding.FragmentRazorPayBinding
+import my.com.fashionapp.util.PaymentProductAdapter
+import my.com.fashionappstaff.data.*
+import org.json.JSONObject
+
+class RazorPayFragment : Fragment() {
+
+    private lateinit var binding: FragmentRazorPayBinding
+    private val vmU: UserViewModel by activityViewModels()
+    private val vmC: CartViewModel by activityViewModels()
+    private val vmP: PaymentViewModel by activityViewModels()
+    private val vmO: OrderViewModel by activityViewModels()
+    private val vmPro : ProductViewModel by activityViewModels()
+    private val vmVC : VoucherClaimViewModel by activityViewModels()
+    private val nav by lazy{ findNavController() }
+
+    private val vid by lazy { requireArguments().getString("vID", "N/A") }
+
+    private lateinit var adapter: PaymentProductAdapter
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
+
+        binding = FragmentRazorPayBinding.inflate(inflater, container, false)
+        vmU.getAll()
+        vmC.getAll()
+        vmP.getAll()
+        vmPro.getAll()
+        vmVC.getAll()
+
+//        Checkout.preload(activity?.applicationContext)
+
+        val preferences = activity?.getSharedPreferences("email", Context.MODE_PRIVATE)
+        val emailLogin = preferences?.getString("emailLogin","")
+
+        adapter = PaymentProductAdapter() { holder, cart ->
+
+        }
+
+        binding.rv.adapter = adapter
+
+        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))
+
+        vmC.getAll().observe(viewLifecycleOwner) { list ->
+            val paymentArray = list.filter { p ->
+                p.cartCheck == "Checked"
+            }
+            adapter.submitList(paymentArray)
+        }
+
+        binding.imgCheckOutBack.setOnClickListener { nav.navigate(R.id.action_razorPayFragment_to_cartFragment) }
+
+        binding.imgVoucherOpen.setOnClickListener {
+            nav.navigate(R.id.voucherApplyFragment)
+        }
+
+        updateTotal()
+
+
+        binding.payButton.setOnClickListener {
+            nav.navigate(R.id.razorActivity)
+        }
+
+        return binding.root
+    }
+
+    private fun updateTotal() {
+
+        binding.txtUsername.text = username
+        binding.txtPhoneNumber.text = phonenumber
+        binding.txtDeliveryAddress.text = homeaddress
+
+
+        val vc = vmVC.get(vid)
+
+        if(vid == ""){
+
+            val shipping = 5.00
+
+            binding.txtMerSubtotal.text = "RM "+ "%.2f".format(totalPrice)
+            binding.txtShipping.text =  "RM " + "%.2f".format(shipping)
+
+            val totalP = totalPrice + shipping
+            val disc = 0.0
+
+            binding.txtDiscount.text = "RM " + "%.2f".format(disc)
+
+            binding.txtTotalPayment.text = "RM " + "%.2f".format(totalP)
+
+            binding.txtTotalPrice.text = "RM " + "%.2f".format(totalP)
+
+            subtotalPrice = totalP
+
+        } else {
+            vourID = vid
+
+            val vouchername = vc?.voucherClaimName
+            val value = vc?.voucherValue
+
+            if (value != 5.0){
+
+                val shipping = 5.00
+
+                binding.txtMerSubtotal.text = "RM "+ "%.2f".format(totalPrice)
+                binding.txtShipping.text =  "RM " + "%.2f".format(shipping)
+
+                val totalP = totalPrice + shipping
+                val disc = totalP * value!!
+
+                val totalAll = totalP - disc
+
+                binding.txtDiscount.text = "-RM " + "%.2f".format(disc)
+
+                binding.txtTotalPayment.text = "RM " + "%.2f".format(totalAll)
+
+                binding.txtTotalPrice.text = "RM " + "%.2f".format(totalAll)
+
+                binding.txtVouchername.text = vouchername
+
+                subtotalPrice = totalAll
+
+            } else {
+
+                val shipping = 5.0
+
+                binding.txtMerSubtotal.text = "RM "+ "%.2f".format(totalPrice)
+                binding.txtShipping.text =  "RM " + "%.2f".format(shipping)
+
+                val totalP = totalPrice + shipping
+
+                val disc = 5.0
+
+                val totalAll = totalP - disc
+
+                binding.txtDiscount.text = "-RM " + "%.2f".format(disc)
+
+                binding.txtTotalPayment.text = "RM " + "%.2f".format(totalAll)
+
+                binding.txtTotalPrice.text = "RM " + "%.2f".format(totalAll)
+
+                binding.txtVouchername.text = vouchername
+
+                subtotalPrice = totalAll
+            }
+
+        }
+
+    }
+
+}
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/HomeFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionapp.UI\r\n\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.SearchView\r\nimport androidx.core.os.bundleOf\r\nimport androidx.fragment.app.activityViewModels\r\nimport androidx.navigation.fragment.findNavController\r\nimport androidx.recyclerview.widget.DividerItemDecoration\r\nimport androidx.recyclerview.widget.GridLayoutManager\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView\r\nimport my.com.fashionapp.R\r\nimport my.com.fashionapp.data.CartViewModel\r\nimport my.com.fashionapp.data.ProductViewModel\r\nimport my.com.fashionapp.data.UserViewModel\r\nimport my.com.fashionapp.databinding.FragmentHomeBinding\r\nimport my.com.fashionapp.util.ProductAdapter\r\n\r\n\r\nclass HomeFragment : Fragment() {\r\n\r\n    private lateinit var binding: FragmentHomeBinding\r\n    private val nav by lazy{ findNavController() }\r\n    private val vmU : UserViewModel by activityViewModels()\r\n    private val vm: ProductViewModel by activityViewModels()\r\n    private val vmC: CartViewModel by activityViewModels()\r\n\r\n    private lateinit var adapter: ProductAdapter\r\n\r\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\r\n        binding = FragmentHomeBinding.inflate(inflater, container, false)\r\n\r\n        // TODO\r\n        vmU.getAll()\r\n        vmC.getAll()\r\n\r\n        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)\r\n        btn.visibility = View.VISIBLE\r\n\r\n        vm.search(\"\")\r\n        binding.edtSearch.setOnQueryTextListener(object : SearchView.OnQueryTextListener {\r\n            override fun onQueryTextSubmit(name: String) = true\r\n            override fun onQueryTextChange(name: String): Boolean {\r\n                vm.search(name)\r\n                return true\r\n            }\r\n        })\r\n\r\n        adapter = ProductAdapter() { holder, product ->\r\n            // Item click\r\n            holder.root.setOnClickListener {\r\n                nav.navigate(R.id.productDetailFragment, bundleOf(\"id\" to product.productId))\r\n            }\r\n\r\n        }\r\n\r\n        binding.rv.adapter = adapter\r\n//        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))\r\n\r\n        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))\r\n\r\n        vm.getResult().observe(viewLifecycleOwner) { list ->\r\n\r\n            val productArray = list.filter { p ->\r\n                p.productQuan != 0\r\n            }\r\n            adapter.submitList(productArray)\r\n//            binding.txtItem.text = \"${list.size} product(s)\"\r\n        }\r\n\r\n\r\n        return binding.root\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/HomeFragment.kt b/app/src/main/java/my/com/fashionapp/UI/HomeFragment.kt
--- a/app/src/main/java/my/com/fashionapp/UI/HomeFragment.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/UI/HomeFragment.kt	(date 1637505719431)
@@ -62,6 +62,7 @@
 
         binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))
 
+
         vm.getResult().observe(viewLifecycleOwner) { list ->
 
             val productArray = list.filter { p ->
Index: app/src/main/res/layout/fragment_razor_pay.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_razor_pay.xml b/app/src/main/res/layout/fragment_razor_pay.xml
new file mode 100644
--- /dev/null	(date 1637519454794)
+++ b/app/src/main/res/layout/fragment_razor_pay.xml	(date 1637519454794)
@@ -0,0 +1,370 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".UI.RazorPayFragment" >
+
+    <ScrollView
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        app:layout_constraintBottom_toTopOf="@+id/bottomNavigationView4"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/bottomNavigationView3">
+
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:orientation="vertical">
+
+            <androidx.constraintlayout.widget.ConstraintLayout
+                android:layout_width="match_parent"
+                android:layout_height="match_parent">
+
+                <RelativeLayout
+                    android:id="@+id/relativeLayout"
+                    android:layout_width="0dp"
+                    android:layout_height="110dp"
+                    android:layout_marginStart="10dp"
+                    android:layout_marginTop="20dp"
+                    android:layout_marginEnd="10dp"
+                    android:background="@drawable/categoryshape1"
+                    app:layout_constraintEnd_toEndOf="parent"
+                    app:layout_constraintStart_toStartOf="parent"
+                    app:layout_constraintTop_toTopOf="parent">
+
+                    <androidx.constraintlayout.widget.ConstraintLayout
+                        android:layout_width="match_parent"
+                        android:layout_height="match_parent"
+                        android:layout_alignParentTop="true"
+                        android:layout_marginTop="-1dp">
+
+                        <TextView
+                            android:id="@+id/txtUsername"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginStart="20dp"
+                            android:layout_marginTop="15dp"
+                            android:textSize="16sp"
+                            android:textStyle="bold"
+                            app:layout_constraintStart_toStartOf="parent"
+                            app:layout_constraintTop_toTopOf="parent"
+                            tools:text="TextView" />
+
+                        <TextView
+                            android:id="@+id/txtPhoneNumber"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginStart="10dp"
+                            android:textColor="#A1A0A0"
+                            android:textSize="14sp"
+                            app:layout_constraintBottom_toBottomOf="@+id/txtUsername"
+                            app:layout_constraintStart_toEndOf="@+id/txtUsername"
+                            app:layout_constraintTop_toTopOf="@+id/txtUsername"
+                            tools:text="TextView" />
+
+                        <TextView
+                            android:id="@+id/txtDeliveryAddress"
+                            android:layout_width="0dp"
+                            android:layout_height="wrap_content"
+                            android:layout_marginStart="20dp"
+                            android:layout_marginTop="10dp"
+                            android:layout_marginEnd="20dp"
+                            android:textColor="#000000"
+                            app:layout_constraintEnd_toEndOf="parent"
+                            app:layout_constraintStart_toStartOf="parent"
+                            app:layout_constraintTop_toBottomOf="@+id/txtUsername"
+                            tools:text="TextView" />
+                    </androidx.constraintlayout.widget.ConstraintLayout>
+                </RelativeLayout>
+
+                <androidx.recyclerview.widget.RecyclerView
+                    android:id="@+id/rv"
+                    android:layout_width="0dp"
+                    android:layout_height="300dp"
+                    android:layout_marginStart="10dp"
+                    android:layout_marginTop="10dp"
+                    android:layout_marginEnd="10dp"
+                    app:layoutManager="LinearLayoutManager"
+                    app:layout_constraintEnd_toEndOf="parent"
+                    app:layout_constraintStart_toStartOf="parent"
+                    app:layout_constraintTop_toBottomOf="@+id/relativeLayout"
+                    tools:listitem="@layout/item_payproduct" />
+
+                <RelativeLayout
+                    android:id="@+id/relativeLayout2"
+                    android:layout_width="0dp"
+                    android:layout_height="wrap_content"
+                    android:layout_marginStart="10dp"
+                    android:layout_marginTop="15dp"
+                    android:layout_marginEnd="10dp"
+                    android:background="@drawable/categoryshape1"
+                    app:layout_constraintEnd_toEndOf="parent"
+                    app:layout_constraintStart_toStartOf="parent"
+                    app:layout_constraintTop_toBottomOf="@+id/rv">
+
+                    <androidx.constraintlayout.widget.ConstraintLayout
+                        android:layout_width="match_parent"
+                        android:layout_height="match_parent"
+                        android:layout_alignParentBottom="true"
+                        android:layout_marginBottom="0dp">
+
+                        <ImageView
+                            android:id="@+id/imageView11"
+                            android:layout_width="30dp"
+                            android:layout_height="30dp"
+                            android:layout_marginStart="5dp"
+                            android:layout_marginTop="10dp"
+                            android:layout_marginBottom="10dp"
+                            app:layout_constraintBottom_toBottomOf="parent"
+                            app:layout_constraintStart_toStartOf="parent"
+                            app:layout_constraintTop_toTopOf="parent"
+                            app:srcCompat="@drawable/coupon" />
+
+                        <TextView
+                            android:id="@+id/textView60"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginStart="10dp"
+                            android:text="Voucher"
+                            android:textSize="16sp"
+                            app:layout_constraintBottom_toBottomOf="@+id/imageView11"
+                            app:layout_constraintStart_toEndOf="@+id/imageView11"
+                            app:layout_constraintTop_toTopOf="@+id/imageView11" />
+
+                        <TextView
+                            android:id="@+id/txtVouchername"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginEnd="5dp"
+                            android:text="Select Voucher"
+                            android:textColor="#8F8F8F"
+                            android:textSize="16sp"
+                            app:layout_constraintBottom_toBottomOf="@+id/imgVoucherOpen"
+                            app:layout_constraintEnd_toStartOf="@+id/imgVoucherOpen"
+                            app:layout_constraintTop_toTopOf="@+id/imgVoucherOpen" />
+
+                        <ImageView
+                            android:id="@+id/imgVoucherOpen"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginTop="10dp"
+                            android:layout_marginBottom="10dp"
+                            app:layout_constraintBottom_toBottomOf="parent"
+                            app:layout_constraintEnd_toEndOf="parent"
+                            app:layout_constraintTop_toTopOf="parent"
+                            app:srcCompat="@drawable/ic_baseline_keyboard_arrow_right_24" />
+
+                    </androidx.constraintlayout.widget.ConstraintLayout>
+                </RelativeLayout>
+
+                <RelativeLayout
+                    android:layout_width="0dp"
+                    android:layout_height="wrap_content"
+                    android:layout_marginStart="10dp"
+                    android:layout_marginTop="10dp"
+                    android:layout_marginEnd="10dp"
+                    app:layout_constraintEnd_toEndOf="parent"
+                    app:layout_constraintStart_toStartOf="parent"
+                    app:layout_constraintTop_toBottomOf="@+id/relativeLayout2">
+
+                    <androidx.constraintlayout.widget.ConstraintLayout
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content">
+
+                        <TextView
+                            android:id="@+id/textView63"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginStart="5dp"
+                            android:layout_marginTop="10dp"
+                            android:text="Merchandise Subtotal"
+                            android:textColor="#7E7C7C"
+                            android:textSize="14sp"
+                            app:layout_constraintStart_toStartOf="parent"
+                            app:layout_constraintTop_toTopOf="parent" />
+
+                        <TextView
+                            android:id="@+id/txtMerSubtotal"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginEnd="5dp"
+                            android:text="TextView"
+                            android:textColor="#7E7C7C"
+                            android:textSize="14sp"
+                            app:layout_constraintBottom_toBottomOf="@+id/textView63"
+                            app:layout_constraintEnd_toEndOf="parent"
+                            app:layout_constraintTop_toTopOf="@+id/textView63" />
+
+                        <TextView
+                            android:id="@+id/textView65"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginStart="5dp"
+                            android:layout_marginTop="10dp"
+                            android:text="Shipping Subtotal"
+                            android:textColor="#7E7C7C"
+                            android:textSize="14sp"
+                            app:layout_constraintStart_toStartOf="parent"
+                            app:layout_constraintTop_toBottomOf="@+id/textView63" />
+
+                        <TextView
+                            android:id="@+id/txtShipping"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginEnd="5dp"
+                            android:text="TextView"
+                            android:textColor="#7E7C7C"
+                            android:textSize="14sp"
+                            app:layout_constraintBottom_toBottomOf="@+id/textView65"
+                            app:layout_constraintEnd_toEndOf="parent"
+                            app:layout_constraintTop_toTopOf="@+id/textView65" />
+
+                        <TextView
+                            android:id="@+id/textView67"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginStart="5dp"
+                            android:layout_marginTop="10dp"
+                            android:layout_marginBottom="10dp"
+                            android:text="Total Payment"
+                            android:textSize="16sp"
+                            android:textStyle="bold"
+                            app:layout_constraintBottom_toBottomOf="parent"
+                            app:layout_constraintStart_toStartOf="parent"
+                            app:layout_constraintTop_toBottomOf="@+id/textView61" />
+
+                        <TextView
+                            android:id="@+id/txtTotalPayment"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginEnd="5dp"
+                            android:text="TextView"
+                            android:textColor="#F40000"
+                            android:textSize="16sp"
+                            app:layout_constraintBottom_toBottomOf="@+id/textView67"
+                            app:layout_constraintEnd_toEndOf="parent"
+                            app:layout_constraintTop_toTopOf="@+id/textView67" />
+
+                        <TextView
+                            android:id="@+id/textView61"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginStart="5dp"
+                            android:layout_marginTop="10dp"
+                            android:text="Discount"
+                            android:textColor="#7E7C7C"
+                            android:textSize="14sp"
+                            app:layout_constraintStart_toStartOf="parent"
+                            app:layout_constraintTop_toBottomOf="@+id/textView65" />
+
+                        <TextView
+                            android:id="@+id/txtDiscount"
+                            android:layout_width="wrap_content"
+                            android:layout_height="wrap_content"
+                            android:layout_marginEnd="5dp"
+                            app:layout_constraintBottom_toBottomOf="@+id/textView61"
+                            app:layout_constraintEnd_toEndOf="parent"
+                            app:layout_constraintTop_toTopOf="@+id/textView61"
+                            tools:text="TextView" />
+                    </androidx.constraintlayout.widget.ConstraintLayout>
+                </RelativeLayout>
+
+            </androidx.constraintlayout.widget.ConstraintLayout>
+
+        </LinearLayout>
+    </ScrollView>
+
+    <com.google.android.material.bottomnavigation.BottomNavigationView
+        android:id="@+id/bottomNavigationView4"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent">
+
+        <androidx.constraintlayout.widget.ConstraintLayout
+            android:layout_width="match_parent"
+            android:layout_height="match_parent">
+
+            <Button
+                android:id="@+id/payButton"
+                android:layout_width="0dp"
+                android:layout_height="wrap_content"
+                android:layout_marginTop="10dp"
+                android:layout_marginEnd="10dp"
+                android:layout_marginBottom="10dp"
+                android:text="Place Order"
+                android:textColor="#F8F8F8"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintTop_toTopOf="parent" />
+
+            <TextView
+                android:id="@+id/textView45"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="90dp"
+                android:text="Total :"
+                android:textSize="16sp"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toTopOf="parent" />
+
+            <TextView
+                android:id="@+id/txtTotalPrice"
+                android:layout_width="0dp"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="10dp"
+                android:layout_marginEnd="10dp"
+                android:textColor="#FD0000"
+                android:textSize="16sp"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintEnd_toStartOf="@+id/payButton"
+                app:layout_constraintStart_toEndOf="@+id/textView45"
+                app:layout_constraintTop_toTopOf="parent"
+                tools:text="TextView" />
+        </androidx.constraintlayout.widget.ConstraintLayout>
+    </com.google.android.material.bottomnavigation.BottomNavigationView>
+
+    <com.google.android.material.bottomnavigation.BottomNavigationView
+        android:id="@+id/bottomNavigationView3"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent">
+
+        <androidx.constraintlayout.widget.ConstraintLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content">
+
+            <ImageView
+                android:id="@+id/imgCheckOutBack"
+                android:layout_width="25dp"
+                android:layout_height="25dp"
+                android:layout_marginStart="20dp"
+                android:src="@drawable/ic_back"
+                app:layout_constraintBottom_toBottomOf="@+id/textView49"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toTopOf="@+id/textView49" />
+
+            <TextView
+                android:id="@+id/textView49"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginTop="10dp"
+                android:layout_marginBottom="10dp"
+                android:text="Payment"
+                android:textColor="#000000"
+                android:textSize="24sp"
+                android:textStyle="bold"
+                app:layout_constraintBottom_toBottomOf="parent"
+                app:layout_constraintEnd_toEndOf="parent"
+                app:layout_constraintStart_toStartOf="parent"
+                app:layout_constraintTop_toTopOf="parent" />
+        </androidx.constraintlayout.widget.ConstraintLayout>
+    </com.google.android.material.bottomnavigation.BottomNavigationView>
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/drawable/customshape.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/drawable/customshape.xml b/app/src/main/res/drawable/customshape.xml
new file mode 100644
--- /dev/null	(date 1637380646211)
+++ b/app/src/main/res/drawable/customshape.xml	(date 1637380646211)
@@ -0,0 +1,55 @@
+<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
+
+    <!-- Transparent Rectangle -->
+    <item>
+        <shape android:shape="rectangle">
+            <corners
+                android:topLeftRadius="8dp"
+                android:topRightRadius="8dp"
+                android:bottomLeftRadius="4dp"
+                android:bottomRightRadius="4dp" />
+
+            <size
+                android:width="300dp"
+                android:height="100dp" />
+            <solid android:color="#FFFFFF" />
+        </shape>
+    </item>
+
+<!--    &lt;!&ndash; Left Half-Circle &ndash;&gt;-->
+<!--    <item-->
+<!--        android:left="-10dp"-->
+<!--        android:right="290dp"-->
+<!--        android:top="40dp"-->
+<!--        android:bottom="40dp">-->
+<!--        <shape android:shape="oval">-->
+<!--            <solid android:color="#000000" />-->
+<!--        </shape>-->
+<!--    </item>-->
+
+<!--    &lt;!&ndash; Right Half-Circle &ndash;&gt;-->
+<!--    <item-->
+<!--        android:left="290dp"-->
+<!--        android:right="-10dp"-->
+<!--        android:top="40dp"-->
+<!--        android:bottom="40dp">-->
+<!--        <shape android:shape="oval">-->
+<!--            <solid android:color="#000000" />-->
+<!--        </shape>-->
+<!--    </item>-->
+
+<!--    &lt;!&ndash; Middle Dotted Line &ndash;&gt;-->
+<!--    <item-->
+<!--        android:left="10dp"-->
+<!--        android:right="10dp">-->
+<!--        <shape android:shape="line">-->
+<!--            <stroke-->
+<!--                android:width="1dp"-->
+<!--                android:dashWidth="10px"-->
+<!--                android:dashGap="10px"-->
+<!--                android:color="#ff00"/>-->
+
+<!--        </shape>-->
+<!--    </item>-->
+
+</layer-list>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/data/VoucherClaimViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/data/VoucherClaimViewModel.kt b/app/src/main/java/my/com/fashionapp/data/VoucherClaimViewModel.kt
new file mode 100644
--- /dev/null	(date 1637477893091)
+++ b/app/src/main/java/my/com/fashionapp/data/VoucherClaimViewModel.kt	(date 1637477893091)
@@ -0,0 +1,100 @@
+package my.com.fashionapp.data
+
+import androidx.lifecycle.MutableLiveData
+import androidx.lifecycle.ViewModel
+import com.google.firebase.firestore.ktx.firestore
+import com.google.firebase.firestore.ktx.toObjects
+import com.google.firebase.ktx.Firebase
+import my.com.fashionappstaff.data.VoucherClaim
+
+class VoucherClaimViewModel : ViewModel() {
+
+    private val col = Firebase.firestore.collection("voucherClaim")
+    private val voucherClaim = MutableLiveData<List<VoucherClaim>>()
+    private var searchVoucher = listOf<VoucherClaim>()
+    private val result = MutableLiveData<List<VoucherClaim>>()
+    private var name = "" // for searching purpose
+
+    init {
+        col.addSnapshotListener { snap, _ -> voucherClaim.value = snap?.toObjects()
+            searchVoucher = snap!!.toObjects<VoucherClaim>()
+            updateResult() }
+    }
+
+    // Search
+    fun search(name: String){
+        this.name = name
+        updateResult()
+    }
+
+    private fun updateResult() {
+        var list = searchVoucher
+
+        //Search
+        list = list.filter {
+            it.voucherClaimName.contains(name, true)
+        }
+
+        result.value = list
+    }
+
+    fun getResult() = result
+
+    fun get(id : String): VoucherClaim?{
+        return voucherClaim.value?.find { v -> v.voucherClaimID == id }
+    }
+
+    fun getitem(id: String): VoucherClaim?{
+        return voucherClaim.value?.find { v -> v.voucherId == id }
+    }
+
+    fun getAll() = voucherClaim
+
+    fun delete(id : String){
+        col.document(id).delete()
+    }
+
+    fun set(v: VoucherClaim){
+        col.document(v.voucherClaimID).set(v)
+    }
+
+    // Calculate the size of products list
+    fun calSize() = voucherClaim.value?.size ?: 0
+
+    fun validID(): String {
+        var newID: String
+
+        val getLastReward = voucherClaim.value?.lastOrNull()?.voucherClaimID.toString()
+        val num: String = getLastReward.substringAfterLast("VClAIM10")
+        newID = "VClAIM10" + (num.toIntOrNull()?.plus(1)).toString()
+
+        if (newID == "VClAIM1010") {
+            newID = "VClAIM1" + (num.toIntOrNull()?.plus(1)).toString()
+            return newID
+        }
+
+        return when (calSize()) {
+            0 -> {
+                newID = "VClAIM10" + (calSize() + 1)
+                newID
+            }
+            in 1..8 -> {
+                val getLastReward = voucherClaim.value?.lastOrNull()?.voucherClaimID.toString()
+                val num: String = getLastReward.substringAfterLast("VClAIM10")
+                newID = "VClAIM10" + (num.toIntOrNull()?.plus(1)).toString()
+                if (newID == "VClAIM10null") {
+                    newID = "VClAIM111"
+                    newID
+                } else newID
+            }
+            else -> {
+                val getLastReward = voucherClaim.value?.lastOrNull()?.voucherClaimID.toString()
+                val num: String = getLastReward.substringAfterLast("VClAIM1")
+                newID = "VClAIM1" + (num.toIntOrNull()?.plus(1)).toString()
+                newID
+            }
+        }
+    }
+
+
+}
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/util/VoucherClaimAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/util/VoucherClaimAdapter.kt b/app/src/main/java/my/com/fashionapp/util/VoucherClaimAdapter.kt
new file mode 100644
--- /dev/null	(date 1637476110436)
+++ b/app/src/main/java/my/com/fashionapp/util/VoucherClaimAdapter.kt	(date 1637476110436)
@@ -0,0 +1,52 @@
+package my.com.fashionapp.util
+
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import android.widget.Button
+import android.widget.ImageView
+import android.widget.TextView
+import androidx.cardview.widget.CardView
+import androidx.recyclerview.widget.DiffUtil
+import androidx.recyclerview.widget.ListAdapter
+import androidx.recyclerview.widget.RecyclerView
+import my.com.fashionapp.R
+import my.com.fashionappstaff.data.VoucherClaim
+
+class VoucherClaimAdapter (val fn: (VoucherClaimAdapter.ViewHolder, VoucherClaim) -> Unit = { _, _ -> })
+    :  ListAdapter<VoucherClaim, VoucherClaimAdapter.ViewHolder>(DiffCallback) {
+
+    companion object DiffCallback : DiffUtil.ItemCallback<VoucherClaim>() {
+        override fun areItemsTheSame(a: VoucherClaim, b: VoucherClaim)    = a.voucherClaimID == b.voucherClaimID
+        override fun areContentsTheSame(a: VoucherClaim, b: VoucherClaim) = a.voucherClaimID == b.voucherClaimID
+    }
+
+    class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {
+        val root = view
+        val cv           : CardView = view.findViewById(R.id.cv)
+        val imgExpiry    : ImageView = view.findViewById(R.id.imgExpiry)
+        val imgPhoto     : ImageView = view.findViewById(R.id.imgVoucher)
+        val txtName      : TextView = view.findViewById(R.id.txtVoucherName)
+        val txtExpiry    : TextView = view.findViewById(R.id.txtExpiryDate)
+        val btnClaim     : Button = view.findViewById(R.id.btnClaim)
+        val txtTerm      : TextView = view.findViewById(R.id.txtTerm)
+    }
+
+    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
+        val view = LayoutInflater
+            .from(parent.context)
+            .inflate(R.layout.item_voucher, parent, false)
+        return ViewHolder(view)
+    }
+
+    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
+        val voucherClaim = getItem(position)
+
+        holder.imgPhoto.setImageBitmap(voucherClaim.voucherClaimImg.toBitmap())
+        holder.txtName.text = voucherClaim.voucherClaimName
+        holder.txtExpiry.text = "Valid " + voucherClaim.voucherClaimExpiryDate
+
+        // TODO: Photo (blob to bitmap)a
+        fn(holder, voucherClaim)
+    }
+}
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/TermNConditionFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/TermNConditionFragment.kt b/app/src/main/java/my/com/fashionapp/UI/TermNConditionFragment.kt
new file mode 100644
--- /dev/null	(date 1637413776370)
+++ b/app/src/main/java/my/com/fashionapp/UI/TermNConditionFragment.kt	(date 1637413776370)
@@ -0,0 +1,59 @@
+package my.com.fashionapp.UI
+
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.findNavController
+import my.com.fashionapp.R
+import my.com.fashionapp.data.VoucherViewModel
+import my.com.fashionapp.databinding.FragmentTermNConditionBinding
+import my.com.fashionapp.util.ViewPageAdapter
+import my.com.fashionapp.util.toBitmap
+
+class TermNConditionFragment : Fragment() {
+
+    private lateinit var binding : FragmentTermNConditionBinding
+    private val nav by lazy{ findNavController() }
+    private val vmV : VoucherViewModel by activityViewModels()
+    private val id by lazy { requireArguments().getString("id", "N/A") }
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
+
+        binding = FragmentTermNConditionBinding.inflate(inflater, container, false)
+
+        binding.imgVoucherBack2.setOnClickListener {
+            nav.navigate(R.id.action_termNConditionFragment_to_voucherFragment2)
+        }
+
+        binding.btnOk.setOnClickListener{
+            nav.navigate(R.id.action_termNConditionFragment_to_voucherFragment2)
+        }
+
+        detail()
+
+
+        return binding.root
+    }
+
+    private fun detail() {
+
+        val v = vmV.get(id)
+        if (v == null){
+            nav.navigateUp()
+            return
+        }
+
+        binding.imgVoucher2.setImageBitmap(v.voucherImg.toBitmap())
+        binding.txtVoucherName.setText(v.voucherName)
+        binding.txtValidDate.setText(v.voucherExpiryDate)
+        binding.txtValidTime.text = v.voucherDate + " " + v.voucherExpiryDate
+        binding.txtCondition.setText(v.voucherDescription)
+        binding.txtTerm.setText(v.voucherTerm)
+
+
+    }
+
+}
\ No newline at end of file
Index: app/src/main/res/layout/fragment_voucher_invalid.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_voucher_invalid.xml b/app/src/main/res/layout/fragment_voucher_invalid.xml
new file mode 100644
--- /dev/null	(date 1637414710615)
+++ b/app/src/main/res/layout/fragment_voucher_invalid.xml	(date 1637414710615)
@@ -0,0 +1,23 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".UI.VoucherInvalidFragment">
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/rv"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        app:layoutManager="LinearLayoutManager"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="1.0"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        app:layout_constraintVertical_bias="1.0"
+        tools:listitem="@layout/item_voucher" />
+
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/VoucherInvalidFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/VoucherInvalidFragment.kt b/app/src/main/java/my/com/fashionapp/UI/VoucherInvalidFragment.kt
new file mode 100644
--- /dev/null	(date 1637475060312)
+++ b/app/src/main/java/my/com/fashionapp/UI/VoucherInvalidFragment.kt	(date 1637475060312)
@@ -0,0 +1,72 @@
+package my.com.fashionapp.UI
+
+import android.graphics.Color
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import androidx.core.os.bundleOf
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.findNavController
+import androidx.recyclerview.widget.DividerItemDecoration
+import com.google.android.material.bottomnavigation.BottomNavigationView
+import my.com.fashionapp.R
+import my.com.fashionapp.data.VoucherViewModel
+import my.com.fashionapp.databinding.FragmentVoucherInvalidBinding
+import my.com.fashionapp.util.VoucherAdapter
+import java.time.LocalDate
+import java.time.format.DateTimeFormatter
+
+class VoucherInvalidFragment : Fragment() {
+
+    private lateinit var binding : FragmentVoucherInvalidBinding
+    private val nav by lazy{ findNavController() }
+    private val vmV : VoucherViewModel by activityViewModels()
+
+    private lateinit var adapter: VoucherAdapter
+
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
+        // Inflate the layout for this fragment
+        binding = FragmentVoucherInvalidBinding.inflate(inflater, container, false)
+
+        vmV.getAll()
+
+        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
+        btn.visibility = View.GONE
+
+
+
+        adapter = VoucherAdapter() { holder, voucher ->
+            // Item click
+
+            holder.cv.setBackgroundColor(Color.rgb(177,175,175))
+            holder.root.isEnabled = false
+//            holder.root.setBackgroundColor(Color.rgb(177,175,175))
+            holder.btnClaim.visibility = View.GONE
+        }
+
+        binding.rv.adapter = adapter
+
+        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))
+
+        val currentDate = LocalDate.now()
+        val viewFormatter = DateTimeFormatter.ofPattern("dd MMM, YYYY")
+        val formatDate = viewFormatter.format(currentDate)
+
+        vmV.getResult().observe(viewLifecycleOwner) { list ->
+
+            val voucherArray = list.filter { v ->
+                v.voucherExpiryDate < formatDate || v.voucherQuantity == 0
+            }
+            adapter.submitList(voucherArray)
+        }
+
+
+
+        return binding.root
+    }
+
+
+}
\ No newline at end of file
Index: app/src/main/res/layout/item_payproduct.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/item_payproduct.xml b/app/src/main/res/layout/item_payproduct.xml
new file mode 100644
--- /dev/null	(date 1637505110546)
+++ b/app/src/main/res/layout/item_payproduct.xml	(date 1637505110546)
@@ -0,0 +1,65 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content">
+
+    <ImageView
+        android:id="@+id/imgProduct"
+        android:layout_width="100dp"
+        android:layout_height="100dp"
+        android:layout_marginBottom="10dp"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        tools:srcCompat="@tools:sample/avatars" />
+
+    <TextView
+        android:id="@+id/txtProductName"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="20dp"
+        android:layout_marginTop="20dp"
+        android:layout_marginEnd="20dp"
+        android:textColor="#000000"
+        android:textSize="16sp"
+        android:textStyle="bold"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toEndOf="@+id/imgProduct"
+        app:layout_constraintTop_toTopOf="parent"
+        tools:text="TextView" />
+
+    <TextView
+        android:id="@+id/txtProductPrice"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="20dp"
+        android:layout_marginBottom="10dp"
+        android:textColor="#808080"
+        app:layout_constraintBottom_toBottomOf="@+id/imgProduct"
+        app:layout_constraintStart_toEndOf="@+id/imgProduct"
+        tools:text="RM 71.90" />
+
+    <TextView
+        android:id="@+id/txtSize"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="20dp"
+        android:textColor="#808080"
+        app:layout_constraintBottom_toTopOf="@+id/txtProductPrice"
+        app:layout_constraintStart_toEndOf="@+id/imgProduct"
+        app:layout_constraintTop_toBottomOf="@+id/txtProductName"
+        tools:text="Size: XL" />
+
+    <TextView
+        android:id="@+id/txtQuantity"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_marginEnd="20dp"
+        android:layout_marginBottom="15dp"
+        android:textColor="#808080"
+        app:layout_constraintBottom_toBottomOf="@+id/imgProduct"
+        app:layout_constraintEnd_toEndOf="parent"
+        tools:text="x1" />
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_voucher_bag.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_voucher_bag.xml b/app/src/main/res/layout/fragment_voucher_bag.xml
new file mode 100644
--- /dev/null	(date 1637478768416)
+++ b/app/src/main/res/layout/fragment_voucher_bag.xml	(date 1637478768416)
@@ -0,0 +1,23 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".UI.VoucherBagFragment">
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/rv"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        app:layoutManager="LinearLayoutManager"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintHorizontal_bias="1.0"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        app:layout_constraintVertical_bias="1.0"
+        tools:listitem="@layout/item_voucher" />
+
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/VoucherBagFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/VoucherBagFragment.kt b/app/src/main/java/my/com/fashionapp/UI/VoucherBagFragment.kt
new file mode 100644
--- /dev/null	(date 1637529028378)
+++ b/app/src/main/java/my/com/fashionapp/UI/VoucherBagFragment.kt	(date 1637529028378)
@@ -0,0 +1,82 @@
+package my.com.fashionapp.UI
+
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import androidx.core.os.bundleOf
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.findNavController
+import androidx.recyclerview.widget.DividerItemDecoration
+import com.google.android.material.bottomnavigation.BottomNavigationView
+import my.com.fashionapp.R
+import my.com.fashionapp.data.UserViewModel
+import my.com.fashionapp.data.VoucherClaimViewModel
+import my.com.fashionapp.data.VoucherViewModel
+import my.com.fashionapp.databinding.FragmentVoucherBagBinding
+import my.com.fashionapp.util.VoucherAdapter
+import my.com.fashionapp.util.VoucherClaimAdapter
+import my.com.fashionappstaff.data.Voucher
+import my.com.fashionappstaff.data.VoucherClaim
+import java.time.LocalDate
+import java.time.format.DateTimeFormatter
+
+class VoucherBagFragment : Fragment() {
+
+    private lateinit var binding: FragmentVoucherBagBinding
+    private val nav by lazy{ findNavController() }
+    private val vmV : VoucherViewModel by activityViewModels()
+    private val vmVC : VoucherClaimViewModel by activityViewModels()
+    private val vmU  : UserViewModel by activityViewModels()
+
+    private lateinit var adapter: VoucherClaimAdapter
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
+
+        binding = FragmentVoucherBagBinding.inflate(inflater, container, false)
+
+        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
+        btn.visibility = View.GONE
+
+        adapter = VoucherClaimAdapter() { holder, voucherCliam ->
+            // Item click
+
+            holder.btnClaim.text = "Use"
+            holder.imgExpiry.visibility = View.GONE
+            holder.txtTerm.setOnClickListener {
+                nav.navigate(R.id.termNConditionFragment, bundleOf("id" to voucherCliam.voucherId))
+            }
+
+            //Claim Voucher
+            holder.btnClaim.setOnClickListener {
+
+            }
+
+        }
+
+        binding.rv.adapter = adapter
+
+        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))
+
+        val currentDate = LocalDate.now()
+        val viewFormatter = DateTimeFormatter.ofPattern("dd MMM, YYYY")
+        val formatDate = viewFormatter.format(currentDate)
+
+        vmVC.getResult().observe(viewLifecycleOwner) { list ->
+
+            val voucherArray = list.filter { v ->
+                 v.voucherClaimQuantity != 0 && v.voucherClaimExpiryDate > formatDate && v.voucherStatus != "Used"
+            }
+
+            adapter.submitList(voucherArray)
+        }
+
+
+
+
+        return binding.root
+    }
+
+
+}
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/LoginProfileFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package my.com.fashionapp.UI\r\n\r\nimport android.content.Context\r\nimport android.content.SharedPreferences\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport androidx.core.os.bundleOf\r\nimport androidx.fragment.app.activityViewModels\r\nimport androidx.navigation.fragment.findNavController\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.firestore.Blob\r\nimport my.com.fashionapp.MainActivity\r\nimport my.com.fashionapp.R\r\nimport my.com.fashionapp.data.UserViewModel\r\nimport my.com.fashionapp.databinding.FragmentLoginProfileBinding\r\nimport my.com.fashionapp.util.toBitmap\r\nimport my.com.fashionappstaff.data.User\r\nimport my.com.fashionappstaff.data.emailAdress\r\nimport my.com.fashionappstaff.data.img\r\nimport my.com.fashionappstaff.data.username\r\n\r\nclass LoginProfileFragment : Fragment() {\r\n\r\n    private lateinit var binding: FragmentLoginProfileBinding\r\n    private val nav by lazy{ findNavController() }\r\n    private val vm: UserViewModel by activityViewModels()\r\n    private val email by lazy { requireArguments().getString(\"email\", \"N/A\") }\r\n    private val id by lazy { requireArguments().getString(\"id\", \"N/A\")}\r\n\r\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\r\n\r\n        binding = FragmentLoginProfileBinding.inflate(inflater, container, false)\r\n        vm.getAll()\r\n        val preferences = activity?.getSharedPreferences(\"email\", Context.MODE_PRIVATE)\r\n        val emailLogin = preferences?.getString(\"emailLogin\",\"\")\r\n\r\n        // TODO\r\n        getImage(emailLogin)\r\n        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)\r\n        btn.visibility = View.VISIBLE\r\n\r\n        // Sign Out Method haven't test yer\r\n        binding.conLayLogout.setOnClickListener { logout() }\r\n        binding.conLayCart.setOnClickListener { nav.navigate(R.id.cartFragment) }\r\n        binding.conLayReward.setOnClickListener { nav.navigate(R.id.rewardFragment) }\r\n        binding.conLayVoucher.setOnClickListener { nav.navigate(R.id.voucherFragment) }\r\n        binding.conLayHistory.setOnClickListener { nav.navigate(R.id.paymentHistoryFragment) }\r\n        binding.conLayProfile.setOnClickListener { nav.navigate(R.id.updateUserProfileFragment) }\r\n        binding.conLayResetPass.setOnClickListener { nav.navigate(R.id.resetPasswordFragment, bundleOf(\"email\" to emailLogin)) }\r\n        binding.conLayDelivery.setOnClickListener {nav.navigate(R.id.deliveryFragment)}\r\n\r\n        // Navigation\r\n\r\n        return binding.root\r\n    }\r\n\r\n    private fun getImage(emailLogin: String?) {\r\n//        val preferences = activity?.getSharedPreferences(\"email\", Context.MODE_PRIVATE)\r\n//        val emailLogin = preferences?.getString(\"emailLogin\",\"\")\r\n\r\n        if(emailLogin != \"\") {\r\n            val u = emailLogin?.let { vm.getUserPhoto2(it) }\r\n            if (u != null) {\r\n                load(u)\r\n            }\r\n        }\r\n\r\n    }\r\n    private fun logout():Boolean {\r\n        // Logout -> vm.logout\r\n        img = Blob.fromBytes(ByteArray(0))\r\n        username = \"\"\r\n        emailAdress = \"\"\r\n\r\n        val sharedPref = activity?.getSharedPreferences(\"checkBo\", Context.MODE_PRIVATE)\r\n        val editor : SharedPreferences.Editor = sharedPref!!.edit()\r\n        editor.putString(\"remember\",\"false\")\r\n        editor.apply()\r\n        val sharedPref1 = activity?.getSharedPreferences(\"email\", Context.MODE_PRIVATE)\r\n        val editor1 : SharedPreferences.Editor = sharedPref1!!.edit()\r\n        editor1.putString(\"emailLogin\",\"\")\r\n        editor1.apply()\r\n\r\n        val test = requireActivity() as MainActivity\r\n        test.navi(emailAdress)\r\n\r\n        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)\r\n        btn.selectedItemId = R.id.nav_home\r\n\r\n        FirebaseAuth.getInstance().signOut()\r\n\r\n        nav.navigate(R.id.action_global_homeFragment)\r\n\r\n        return true\r\n    }\r\n\r\n    private fun load (u: User){\r\n\r\n        if (img == Blob.fromBytes(ByteArray(0)) && username == \"\"){\r\n            if(u != null){\r\n                binding.imgUserPic.setImageBitmap(u.userPhoto.toBitmap())\r\n                binding.txtUsername.text = u.userName\r\n            }\r\n        }else if(img == Blob.fromBytes(ByteArray(0))){\r\n            if(u != null){\r\n                binding.imgUserPic.setImageBitmap(u.userPhoto.toBitmap())\r\n                binding.txtUsername.text = username\r\n            }\r\n        }else{\r\n            binding.imgUserPic.setImageBitmap(img.toBitmap())\r\n            binding.txtUsername.text = username\r\n        }\r\n\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/LoginProfileFragment.kt b/app/src/main/java/my/com/fashionapp/UI/LoginProfileFragment.kt
--- a/app/src/main/java/my/com/fashionapp/UI/LoginProfileFragment.kt	(revision ae4bc95d7341c20660c6f006a2719c5f111873ce)
+++ b/app/src/main/java/my/com/fashionapp/UI/LoginProfileFragment.kt	(date 1637512148571)
@@ -35,15 +35,15 @@
 
         binding = FragmentLoginProfileBinding.inflate(inflater, container, false)
         vm.getAll()
+
         val preferences = activity?.getSharedPreferences("email", Context.MODE_PRIVATE)
         val emailLogin = preferences?.getString("emailLogin","")
 
-        // TODO
         getImage(emailLogin)
         val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
         btn.visibility = View.VISIBLE
 
-        // Sign Out Method haven't test yer
+
         binding.conLayLogout.setOnClickListener { logout() }
         binding.conLayCart.setOnClickListener { nav.navigate(R.id.cartFragment) }
         binding.conLayReward.setOnClickListener { nav.navigate(R.id.rewardFragment) }
Index: app/src/main/res/drawable/categoryshape1.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/drawable/categoryshape1.xml b/app/src/main/res/drawable/categoryshape1.xml
new file mode 100644
--- /dev/null	(date 1637482844206)
+++ b/app/src/main/res/drawable/categoryshape1.xml	(date 1637482844206)
@@ -0,0 +1,11 @@
+<?xml version="1.0" encoding="utf-8"?>
+<shape xmlns:android="http://schemas.android.com/apk/res/android"
+    android:shape="rectangle">
+
+    <solid android:color="#FFFFFFFF"/>
+
+    <corners android:radius="10dp"/>
+
+    <stroke android:width="2dp" android:color="#1C4DAF" />
+
+</shape>
\ No newline at end of file
Index: app/src/main/java/my/com/fashionapp/UI/VoucherUsedFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/my/com/fashionapp/UI/VoucherUsedFragment.kt b/app/src/main/java/my/com/fashionapp/UI/VoucherUsedFragment.kt
new file mode 100644
--- /dev/null	(date 1637520284228)
+++ b/app/src/main/java/my/com/fashionapp/UI/VoucherUsedFragment.kt	(date 1637520284228)
@@ -0,0 +1,71 @@
+package my.com.fashionapp.UI
+
+import android.graphics.Color
+import android.os.Bundle
+import androidx.fragment.app.Fragment
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import androidx.fragment.app.activityViewModels
+import androidx.navigation.fragment.findNavController
+import androidx.recyclerview.widget.DividerItemDecoration
+import com.google.android.material.bottomnavigation.BottomNavigationView
+import my.com.fashionapp.R
+import my.com.fashionapp.data.VoucherClaimViewModel
+import my.com.fashionapp.data.VoucherViewModel
+import my.com.fashionapp.databinding.FragmentVoucherUsedBinding
+import my.com.fashionapp.util.VoucherAdapter
+import my.com.fashionapp.util.VoucherClaimAdapter
+import java.time.LocalDate
+import java.time.format.DateTimeFormatter
+
+class VoucherUsedFragment : Fragment() {
+
+    private lateinit var binding : FragmentVoucherUsedBinding
+    private val nav by lazy{ findNavController() }
+    private val vmVC : VoucherClaimViewModel by activityViewModels()
+
+    private lateinit var adapter: VoucherClaimAdapter
+
+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
+        // Inflate the layout for this fragment
+        binding = FragmentVoucherUsedBinding.inflate(inflater, container, false)
+
+        vmVC.getAll()
+
+        val btn : BottomNavigationView = requireActivity().findViewById(R.id.bottom_navigation)
+        btn.visibility = View.GONE
+
+
+
+        adapter = VoucherClaimAdapter() { holder, voucher ->
+            // Item click
+            holder.imgExpiry.visibility = View.GONE
+            holder.cv.setBackgroundColor(Color.rgb(177,175,175))
+            holder.root.isEnabled = false
+//            holder.root.setBackgroundColor(Color.rgb(177,175,175))
+            holder.btnClaim.visibility = View.GONE
+        }
+
+        binding.rv.adapter = adapter
+
+        binding.rv.addItemDecoration(DividerItemDecoration(context, DividerItemDecoration.VERTICAL))
+
+        val currentDate = LocalDate.now()
+        val viewFormatter = DateTimeFormatter.ofPattern("dd MMM, YYYY")
+        val formatDate = viewFormatter.format(currentDate)
+
+        vmVC.getResult().observe(viewLifecycleOwner) { list ->
+
+            val voucherArray = list.filter { v ->
+                v.voucherStatus == "Used"
+            }
+            adapter.submitList(voucherArray)
+        }
+
+
+        return binding.root
+    }
+
+
+}
\ No newline at end of file
Index: app/src/main/res/layout/fragment_voucher_used.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_voucher_used.xml b/app/src/main/res/layout/fragment_voucher_used.xml
new file mode 100644
--- /dev/null	(date 1637414710628)
+++ b/app/src/main/res/layout/fragment_voucher_used.xml	(date 1637414710628)
@@ -0,0 +1,20 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".UI.VoucherUsedFragment">
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/rv"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        app:layoutManager="LinearLayoutManager"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        tools:listitem="@layout/item_voucher" />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
